{"version":3,"sources":["casa_financas/events.cljs"],"mappings":"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","names":["re_frame.core.reg_event_fx","_","casa-financas.db/default-db","p__13165","map__13166","cljs.core/--destructure-map","cljs.core.get","db","re_frame.core.reg_event_db","p__13167","vec__13168","cljs.core.nth","usuario","cljs.core.assoc","p__13171","p__13172","map__13173","vec__13174","email","senha","p__13177","map__13178","p__13179","p__13180","map__13181","vec__13182","p__13185","map__13186","mes","p__13187","vec__13188","aba","p__13191","map__13192","map__13193","ano","novo-mes","cljs.core._EQ_","novo-ano","p__13194","map__13195","map__13196","p__13197","vec__13198","tipo","dados","p__13201","vec__13202","despesas","p__13205","vec__13206","entradas","p__13209","vec__13210","templates","p__13213","vec__13214","p__13217","vec__13218","v","p__13221","vec__13222","erro","casa-financas.events/gerar-entradas-bolso","despesa","pagadores","eh-bolso?","cljs.core/seq","cljs.core/not","p1__13225#","cljs.core/some","valor-por-pagador","cljs.core/count","data-str","m","a","d","cljs.core.mapv","pid","cljs.core/random-uuid","casa-financas.events/remover-entradas-auto","despesa-id","cljs.core.update","es","cljs.core/vec","p1__13226#","cljs.core.remove","p__13228","p__13229","map__13230","vec__13231","id","cljs.core/first","p1__13227#","cljs.core.filter","entradas-auto","novo-db","ds","js/Date","cljs.core.merge","e","p__13234","p__13235","map__13236","vec__13237","p__13241","p__13242","map__13243","vec__13244","existe?","p1__13240#","cljs.core.conj","p__13248","p__13249","map__13250","vec__13251","p1__13247#","p__13255","p__13256","map__13257","vec__13258","entrada","p1__13254#","p__13262","p__13263","map__13264","vec__13265","p1__13261#","p__13269","p__13270","map__13271","vec__13272","template","p1__13268#","ts","t","p__13276","p__13277","map__13278","vec__13279","p1__13275#","p__13283","p__13284","map__13285","vec__13286","p1__13282#","p__13289","map__13290","templates-ativos","ids-existentes","cljs.core/set","cljs.core.map","novas-despesas","iter__5628__auto__","s__13292","cljs.core/LazySeq","temp__5823__auto__","cljs.core/chunked-seq?","c__5626__auto__","size__5627__auto__","b__13294","cljs.core/chunk-buffer","i__13293","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__13291","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","cljs.core/contains?","or__5142__auto__","cljs.core/into","p__13295","vec__13296","re-frame.core/reg-fx","casa-financas.supabase/sessao-atual","res","temp__5821__auto__","cljs.core.get_in","re-frame.core/dispatch","p__13299","map__13300","casa-financas.supabase/login!","casa-financas.supabase/logout!","p__13301","map__13302","casa-financas.supabase/buscar-despesas!","p__13303","map__13304","casa-financas.supabase/buscar-entradas!","casa-financas.supabase/buscar-templates!","casa-financas.supabase/salvar-despesa!","err","casa-financas.supabase/marcar-pago!","casa-financas.supabase/desmarcar-pago!","casa-financas.supabase/salvar-entrada!","casa-financas.supabase/deletar!","casa-financas.supabase/deletar-entradas-auto!","casa-financas.supabase/salvar-template!","p__13305","map__13306","ativo","casa-financas.supabase/toggle-template!","casa-financas.supabase/buscar-todas-despesas!","casa-financas.supabase/buscar-todas-entradas!","events","seq__13307","chunk__13308","count__13309","i__13310","c__5673__auto__","cljs.core/chunk-first","cljs.core/next"],"sourcesContent":["(ns casa-financas.events\n  (:require [re-frame.core :as rf]\n            [casa-financas.db :as db]\n            [casa-financas.supabase :as supa]))\n\n;; -- Init --\n(rf/reg-event-fx\n :initialize-db\n (fn [_ _]\n   {:db       db/default-db\n    :dispatch [:verificar-sessao]}))\n\n;; -- Auth --\n(rf/reg-event-fx\n :verificar-sessao\n (fn [{:keys [db]} _]\n   {:db db\n    :supabase/sessao nil}))\n\n(rf/reg-event-db\n :set-usuario\n (fn [db [_ usuario]]\n   (assoc db :usuario-atual usuario)))\n\n(rf/reg-event-fx\n :login\n (fn [{:keys [db]} [_ email senha]]\n   {:db             (assoc db :loading true :erro nil)\n    :supabase/login {:email email :senha senha}}))\n\n(rf/reg-event-fx\n :logout\n (fn [{:keys [db]} _]\n   {:db              (assoc db :loading true)\n    :supabase/logout nil}))\n\n(rf/reg-event-fx\n :usuario-logado\n (fn [{:keys [db]} [_ usuario]]\n   {:db       (assoc db :usuario-atual usuario :loading false)\n    :dispatch [:carregar-dados]}))\n\n(rf/reg-event-db\n :usuario-deslogado\n (fn [db _]\n   (assoc db :usuario-atual nil :loading false)))\n\n(rf/reg-event-fx\n :carregar-dados\n (fn [{:keys [db]} _]\n   (let [mes (:mes-atual db)]\n     {:db                       (assoc db :loading true)\n      :supabase/buscar-despesas {:ano (:ano mes) :mes (:mes mes)}\n      :supabase/buscar-entradas {:ano (:ano mes) :mes (:mes mes)}\n      :supabase/buscar-templates nil\n      :supabase/buscar-historico nil})))\n\n;; -- Navega\u00e7\u00e3o --\n(rf/reg-event-db\n :set-aba\n (fn [db [_ aba]]\n   (assoc db :aba-ativa aba)))\n\n(rf/reg-event-fx\n :mes-anterior\n (fn [{:keys [db]} _]\n   (let [{:keys [ano mes]} (:mes-atual db)\n         novo-mes (if (= mes 1) 12 (dec mes))\n         novo-ano (if (= mes 1) (dec ano) ano)]\n     {:db       (assoc db :mes-atual {:ano novo-ano :mes novo-mes})\n      :dispatch [:carregar-dados]})))\n\n(rf/reg-event-fx\n :mes-proximo\n (fn [{:keys [db]} _]\n   (let [{:keys [ano mes]} (:mes-atual db)\n         novo-mes (if (= mes 12) 1 (inc mes))\n         novo-ano (if (= mes 12) (inc ano) ano)]\n     {:db       (assoc db :mes-atual {:ano novo-ano :mes novo-mes})\n      :dispatch [:carregar-dados]})))\n\n;; -- Modal --\n(rf/reg-event-db\n :abrir-modal\n (fn [db [_ tipo dados]]\n   (assoc db :modal {:tipo tipo :dados dados})))\n\n(rf/reg-event-db\n :fechar-modal\n (fn [db _]\n   (assoc db :modal nil)))\n\n;; -- Dados --\n(rf/reg-event-db\n :set-despesas\n (fn [db [_ despesas]]\n   (assoc db :despesas despesas :loading false)))\n\n(rf/reg-event-db\n :set-entradas\n (fn [db [_ entradas]]\n   (assoc db :entradas entradas)))\n\n(rf/reg-event-db\n :set-templates\n (fn [db [_ templates]]\n   (assoc db :templates templates)))\n\n(rf/reg-event-db\n :set-historico\n (fn [db [_ despesas entradas]]\n   (assoc db\n          :despesas-historico despesas\n          :entradas-historico entradas)))\n\n(rf/reg-event-db\n :set-loading\n (fn [db [_ v]]\n   (assoc db :loading v)))\n\n(rf/reg-event-db\n :set-erro\n (fn [db [_ erro]]\n   (assoc db :erro erro)))\n\n;; -- L\u00f3gica entradas autom\u00e1ticas --\n(defn gerar-entradas-bolso [despesa mes]\n  (let [pagadores (:pagadores despesa)\n        eh-bolso? (and (seq pagadores)\n                       (not (some #(= % \"conjunta\") pagadores)))]\n    (when eh-bolso?\n      (let [valor-por-pagador (/ (:valor despesa) (count pagadores))\n            data-str (let [m (:mes mes)\n                           a (:ano mes)\n                           d (:dia_do_mes despesa)]\n                       (str a \"-\"\n                            (when (< m 10) \"0\") m \"-\"\n                            (when (< d 10) \"0\") d))]\n        (mapv (fn [pid]\n                {:id          (str (random-uuid))\n                 :pessoa_id   pid\n                 :valor       valor-por-pagador\n                 :data        data-str\n                 :descricao   (str \"Pgto: \" (:descricao despesa))\n                 :auto        true\n                 :despesa_ref (:id despesa)})\n              pagadores)))))\n\n(defn remover-entradas-auto [db despesa-id]\n  (update db :entradas\n          (fn [es]\n            (vec (remove #(= (:despesa_ref %) despesa-id) es)))))\n\n;; -- Despesas --\n(rf/reg-event-fx\n :marcar-pago\n (fn [{:keys [db]} [_ id]]\n   (let [despesa       (first (filter #(= (:id %) id) (:despesas db)))\n         mes           (:mes-atual db)\n         entradas-auto (when despesa\n                         (gerar-entradas-bolso\n                          (assoc despesa :pago true) mes))\n         novo-db       (update db :despesas\n                               (fn [ds]\n                                 (mapv (fn [d]\n                                         (if (= (:id d) id)\n                                           (assoc d :pago true\n                                                  :data_pagamento (.toISOString (js/Date.)))\n                                           d))\n                                       ds)))]\n     (merge\n      {:db                  novo-db\n       :supabase/marcar-pago id}\n      (when (seq entradas-auto)\n        {:dispatch-n (mapv (fn [e] [:salvar-entrada e]) entradas-auto)})))))\n\n(rf/reg-event-fx\n :desmarcar-pago\n (fn [{:keys [db]} [_ id]]\n   (let [novo-db (-> db\n                     (update :despesas\n                             (fn [ds]\n                               (mapv (fn [d]\n                                       (if (= (:id d) id)\n                                         (assoc d :pago false :data_pagamento nil)\n                                         d))\n                                     ds)))\n                     (remover-entradas-auto id))]\n     {:db                    novo-db\n      :supabase/desmarcar-pago id\n      :supabase/deletar-entradas-auto id})))\n\n(rf/reg-event-fx\n :salvar-despesa\n (fn [{:keys [db]} [_ despesa]]\n   (let [existe?       (some #(= (:id %) (:id despesa)) (:despesas db))\n         novo-db       (update db :despesas\n                               (fn [ds]\n                                 (if existe?\n                                   (mapv (fn [d] (if (= (:id d) (:id despesa)) despesa d)) ds)\n                                   (conj (vec ds) despesa))))\n         mes           (:mes-atual db)\n         entradas-auto (when (:pago despesa)\n                         (gerar-entradas-bolso despesa mes))]\n     (merge\n      {:db                      (assoc novo-db :modal nil)\n       :supabase/salvar-despesa despesa}\n      (when (seq entradas-auto)\n        {:dispatch-n (mapv (fn [e] [:salvar-entrada e]) entradas-auto)})))))\n\n(rf/reg-event-fx\n :deletar-despesa\n (fn [{:keys [db]} [_ id]]\n   {:db                       (-> db\n                                  (update :despesas\n                                          (fn [ds] (vec (remove #(= (:id %) id) ds))))\n                                  (remover-entradas-auto id))\n    :supabase/deletar-despesa id\n    :supabase/deletar-entradas-auto id}))\n\n;; -- Entradas --\n(rf/reg-event-fx\n :salvar-entrada\n (fn [{:keys [db]} [_ entrada]]\n   (let [existe? (some #(= (:id %) (:id entrada)) (:entradas db))\n         novo-db (update db :entradas\n                         (fn [es]\n                           (if existe?\n                             (mapv (fn [e] (if (= (:id e) (:id entrada)) entrada e)) es)\n                             (conj (vec es) entrada))))]\n     {:db                     (assoc novo-db :modal nil)\n      :supabase/salvar-entrada entrada})))\n\n(rf/reg-event-fx\n :deletar-entrada\n (fn [{:keys [db]} [_ id]]\n   {:db                      (update db :entradas\n                                     (fn [es] (vec (remove #(= (:id %) id) es))))\n    :supabase/deletar-entrada id}))\n\n;; -- Templates --\n(rf/reg-event-fx\n :salvar-template\n (fn [{:keys [db]} [_ template]]\n   (let [existe? (some #(= (:id %) (:id template)) (:templates db))\n         novo-db (update db :templates\n                         (fn [ts]\n                           (if existe?\n                             (mapv (fn [t] (if (= (:id t) (:id template)) template t)) ts)\n                             (conj (vec ts) template))))]\n     {:db                      (assoc novo-db :modal nil)\n      :supabase/salvar-template template})))\n\n(rf/reg-event-fx\n :deletar-template\n (fn [{:keys [db]} [_ id]]\n   {:db                       (update db :templates\n                                      (fn [ts] (vec (remove #(= (:id %) id) ts))))\n    :supabase/deletar-template id}))\n\n(rf/reg-event-fx\n :toggle-template\n (fn [{:keys [db]} [_ id]]\n   (let [novo-db  (update db :templates\n                          (fn [ts]\n                            (mapv (fn [t]\n                                    (if (= (:id t) id) (update t :ativo not) t))\n                                  ts)))\n         template (first (filter #(= (:id %) id) (:templates novo-db)))]\n     {:db                       novo-db\n      :supabase/toggle-template {:id id :ativo (:ativo template)}})))\n\n(rf/reg-event-fx\n :importar-templates\n (fn [{:keys [db]} _]\n   (let [templates-ativos (filter :ativo (:templates db))\n         mes              (:mes-atual db)\n         ids-existentes   (set (map :origem_template_id (:despesas db)))\n         novas-despesas   (vec (for [t templates-ativos\n                                     :when (not (contains? ids-existentes (:id t)))]\n                                 {:id                 (str (random-uuid))\n                                  :origem_template_id (:id t)\n                                  :descricao          (:descricao t)\n                                  :valor              (:valor_padrao t)\n                                  :dia_do_mes         (or (:dia_padrao t) 1)\n                                  :forma_pagamento    (:forma_pagamento_padrao t)\n                                  :pagadores          (or (:pagador_padrao t) [\"conjunta\"])\n                                  :divisao            (:divisao t)\n                                  :pago               false\n                                  :ano                (:ano mes)\n                                  :mes                (:mes mes)}))]\n     {:db         (update db :despesas into novas-despesas)\n      :dispatch-n (mapv (fn [d] [:salvar-despesa-silencioso d]) novas-despesas)})))\n\n(rf/reg-event-fx\n :salvar-despesa-silencioso\n (fn [_ [_ despesa]]\n   {:supabase/salvar-despesa despesa}))\n\n;; -- Effects Supabase --\n(rf/reg-fx\n :supabase/sessao\n (fn [_]\n   (supa/sessao-atual\n    (fn [res]\n      (if-let [usuario (get-in res [:data :session :user])]\n        (rf/dispatch [:usuario-logado usuario])\n        (rf/dispatch [:usuario-deslogado]))))))\n\n(rf/reg-fx\n :supabase/login\n (fn [{:keys [email senha]}]\n   (supa/login! email senha\n                (fn [res]\n                  (if (:error res)\n                    (rf/dispatch [:set-erro \"Email ou senha incorretos\"])\n                    (rf/dispatch [:usuario-logado (get-in res [:data :user])]))))))\n\n(rf/reg-fx\n :supabase/logout\n (fn [_]\n   (supa/logout!\n    (fn [_]\n      (rf/dispatch [:usuario-deslogado])))))\n\n(rf/reg-fx\n :supabase/buscar-despesas\n (fn [{:keys [ano mes]}]\n   (supa/buscar-despesas! ano mes\n                          (fn [despesas]\n                            (rf/dispatch [:set-despesas despesas])))))\n\n(rf/reg-fx\n :supabase/buscar-entradas\n (fn [{:keys [ano mes]}]\n   (supa/buscar-entradas! ano mes\n                          (fn [entradas]\n                            (rf/dispatch [:set-entradas entradas])))))\n\n(rf/reg-fx\n :supabase/buscar-templates\n (fn [_]\n   (supa/buscar-templates!\n    (fn [templates]\n      (rf/dispatch [:set-templates templates])))))\n\n(rf/reg-fx\n :supabase/salvar-despesa\n (fn [despesa]\n   (supa/salvar-despesa! despesa\n                         (fn [err]\n                           (when err\n                             (rf/dispatch [:set-erro \"Erro ao salvar despesa\"]))))))\n\n(rf/reg-fx\n :supabase/marcar-pago\n (fn [id]\n   (supa/marcar-pago! id\n                      (fn [err]\n                        (when err\n                          (rf/dispatch [:set-erro \"Erro ao marcar como pago\"]))))))\n\n(rf/reg-fx\n :supabase/desmarcar-pago\n (fn [id]\n   (supa/desmarcar-pago! id\n                         (fn [err]\n                           (when err\n                             (rf/dispatch [:set-erro \"Erro ao desmarcar pagamento\"]))))))\n\n(rf/reg-fx\n :supabase/salvar-entrada\n (fn [entrada]\n   (supa/salvar-entrada! entrada\n                         (fn [err]\n                           (when err\n                             (rf/dispatch [:set-erro \"Erro ao salvar entrada\"]))))))\n\n(rf/reg-fx\n :supabase/deletar-entrada\n (fn [id]\n   (supa/deletar! \"entradas\" id)))\n\n(rf/reg-fx\n :supabase/deletar-entradas-auto\n (fn [despesa-id]\n   (supa/deletar-entradas-auto! despesa-id)))\n\n(rf/reg-fx\n :supabase/salvar-template\n (fn [template]\n   (supa/salvar-template! template\n                          (fn [err]\n                            (when err\n                              (rf/dispatch [:set-erro \"Erro ao salvar template\"]))))))\n\n(rf/reg-fx\n :supabase/toggle-template\n (fn [{:keys [id ativo]}]\n   (supa/toggle-template! id ativo\n                          (fn [err]\n                            (when err\n                              (rf/dispatch [:set-erro \"Erro ao atualizar template\"]))))))\n\n(rf/reg-fx\n :supabase/deletar-despesa\n (fn [id]\n   (supa/deletar! \"despesa_mensal\" id)))\n\n(rf/reg-fx\n :supabase/deletar-template\n (fn [id]\n   (supa/deletar! \"template_despesa\" id)))\n\n(rf/reg-fx\n :supabase/buscar-historico\n (fn [_]\n   (supa/buscar-todas-despesas!\n    (fn [despesas]\n      (supa/buscar-todas-entradas!\n       (fn [entradas]\n         (rf/dispatch [:set-historico despesas entradas])))))))\n\n(rf/reg-fx\n :dispatch-n\n (fn [events]\n   (doseq [e events]\n     (rf/dispatch e))))"]}