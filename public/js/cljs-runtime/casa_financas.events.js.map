{"version":3,"sources":["casa_financas/events.cljs"],"mappings":"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","names":["re_frame.core.reg_event_fx","_","casa-financas.db/default-db","p__18374","map__18375","cljs.core/--destructure-map","cljs.core.get","db","p__18376","p__18377","map__18378","vec__18379","cljs.core.nth","email","senha","cljs.core.assoc","p__18382","map__18383","p__18384","p__18385","map__18386","vec__18387","usuario","re_frame.core.reg_event_db","p__18390","map__18391","mes","p__18392","vec__18393","aba","p__18396","map__18397","map__18398","ano","novo-mes","cljs.core._EQ_","novo-ano","p__18399","map__18400","map__18401","p__18402","vec__18403","tipo","dados","p__18406","vec__18407","despesas","p__18410","vec__18411","entradas","p__18414","vec__18415","templates","p__18418","vec__18419","p__18422","vec__18423","erro","casa-financas.events/gerar-entradas-bolso","despesa","pagadores","eh-bolso?","cljs.core/seq","cljs.core/not","p1__18426#","cljs.core/some","valor-por-pagador","cljs.core/count","data-str","m","a","d","cljs.core.mapv","pid","cljs.core/random-uuid","casa-financas.events/remover-entradas-auto","despesa-id","cljs.core.update","es","cljs.core/vec","p1__18427#","cljs.core.remove","p__18429","p__18430","map__18431","vec__18432","id","cljs.core/first","p1__18428#","cljs.core.filter","entradas-auto","novo-db","ds","js/Date","cljs.core.merge","e","p__18435","p__18436","map__18437","vec__18438","p__18442","p__18443","map__18444","vec__18445","existe?","p1__18441#","cljs.core.conj","p__18449","p__18450","map__18451","vec__18452","p1__18448#","p__18456","p__18457","map__18458","vec__18459","entrada","p1__18455#","p__18463","p__18464","map__18465","vec__18466","p1__18462#","p__18470","p__18471","map__18472","vec__18473","template","p1__18469#","ts","t","p__18477","p__18478","map__18479","vec__18480","p1__18476#","p__18484","p__18485","map__18486","vec__18487","p1__18483#","p__18490","map__18491","templates-ativos","ids-existentes","cljs.core/set","cljs.core.map","novas-despesas","iter__5628__auto__","s__18493","cljs.core/LazySeq","temp__5823__auto__","cljs.core/chunked-seq?","c__5626__auto__","size__5627__auto__","b__18495","cljs.core/chunk-buffer","i__18494","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__18492","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","cljs.core/contains?","or__5142__auto__","cljs.core/into","p__18496","vec__18497","re-frame.core/reg-fx","casa-financas.supabase/sessao-atual","res","temp__5821__auto__","cljs.core.get_in","re-frame.core/dispatch","p__18500","map__18501","casa-financas.supabase/login!","casa-financas.supabase/logout!","p__18502","map__18503","casa-financas.supabase/buscar-despesas!","p__18504","map__18505","casa-financas.supabase/buscar-entradas!","casa-financas.supabase/buscar-templates!","casa-financas.supabase/salvar-despesa!","err","casa-financas.supabase/marcar-pago!","casa-financas.supabase/desmarcar-pago!","casa-financas.supabase/salvar-entrada!","casa-financas.supabase/deletar!","casa-financas.supabase/deletar-entradas-auto!","casa-financas.supabase/salvar-template!","p__18506","map__18507","ativo","casa-financas.supabase/toggle-template!","casa-financas.supabase/buscar-todas-despesas!","casa-financas.supabase/buscar-todas-entradas!","events","seq__18508","chunk__18509","count__18510","i__18511","c__5673__auto__","cljs.core/chunk-first","cljs.core/next","casa-financas.supabase/buscar-configuracoes!","configs","p__18512","vec__18513","casa-financas.utils/reset-cores!","p__18516","p__18517","map__18518","vec__18519","pessoa-id","cor","chave","cljs.core.swap_BANG_","casa-financas.utils/cores-pessoas","cljs.core/assoc","cljs.core/assoc-in","p__18522","map__18523","valor","casa-financas.supabase/salvar-configuracao!","js/console.log","casa-financas.supabase/buscar-categorias!","cats","p__18524","vec__18525","p__18528","p__18529","map__18530","vec__18531","categoria","casa-financas.supabase/salvar-categoria!"],"sourcesContent":["(ns casa-financas.events\r\n  (:require [re-frame.core :as rf]\r\n            [casa-financas.db :as db]\r\n            [casa-financas.supabase :as supa]\r\n            [casa-financas.utils :as u]))\r\n\r\n;; -- Init --\r\n(rf/reg-event-fx\r\n :initialize-db\r\n (fn [_ _]\r\n   {:db       db/default-db\r\n    :dispatch [:verificar-sessao]}))\r\n\r\n;; -- Auth --\r\n(rf/reg-event-fx\r\n :verificar-sessao\r\n (fn [{:keys [db]} _]\r\n   {:db db\r\n    :supabase/sessao nil}))\r\n\r\n(rf/reg-event-fx\r\n :login\r\n (fn [{:keys [db]} [_ email senha]]\r\n   {:db             (assoc db :loading true :erro nil)\r\n    :supabase/login {:email email :senha senha}}))\r\n\r\n(rf/reg-event-fx\r\n :logout\r\n (fn [{:keys [db]} _]\r\n   {:db              (assoc db :loading true)\r\n    :supabase/logout nil}))\r\n\r\n(rf/reg-event-fx\r\n :usuario-logado\r\n (fn [{:keys [db]} [_ usuario]]\r\n   {:db       (assoc db :usuario-atual usuario :loading false)\r\n    :dispatch [:carregar-dados]}))\r\n\r\n(rf/reg-event-db\r\n :usuario-deslogado\r\n (fn [db _]\r\n   (assoc db :usuario-atual nil :loading false)))\r\n\r\n(rf/reg-event-fx\r\n :carregar-dados\r\n (fn [{:keys [db]} _]\r\n   (let [mes (:mes-atual db)]\r\n     {:db                       (assoc db :loading true)\r\n      :supabase/buscar-despesas {:ano (:ano mes) :mes (:mes mes)}\r\n      :supabase/buscar-entradas {:ano (:ano mes) :mes (:mes mes)}\r\n      :supabase/buscar-templates nil\r\n      :supabase/buscar-historico nil\r\n      :supabase/buscar-configuracoes nil\r\n      :supabase/buscar-categorias nil})))\r\n\r\n;; -- Navega\u00e7\u00e3o --\r\n(rf/reg-event-db\r\n :set-aba\r\n (fn [db [_ aba]]\r\n   (assoc db :aba-ativa aba)))\r\n\r\n(rf/reg-event-fx\r\n :mes-anterior\r\n (fn [{:keys [db]} _]\r\n   (let [{:keys [ano mes]} (:mes-atual db)\r\n         novo-mes (if (= mes 1) 12 (dec mes))\r\n         novo-ano (if (= mes 1) (dec ano) ano)]\r\n     {:db       (assoc db :mes-atual {:ano novo-ano :mes novo-mes})\r\n      :dispatch [:carregar-dados]})))\r\n\r\n(rf/reg-event-fx\r\n :mes-proximo\r\n (fn [{:keys [db]} _]\r\n   (let [{:keys [ano mes]} (:mes-atual db)\r\n         novo-mes (if (= mes 12) 1 (inc mes))\r\n         novo-ano (if (= mes 12) (inc ano) ano)]\r\n     {:db       (assoc db :mes-atual {:ano novo-ano :mes novo-mes})\r\n      :dispatch [:carregar-dados]})))\r\n\r\n;; -- Modal --\r\n(rf/reg-event-db\r\n :abrir-modal\r\n (fn [db [_ tipo dados]]\r\n   (assoc db :modal {:tipo tipo :dados dados})))\r\n\r\n(rf/reg-event-db\r\n :fechar-modal\r\n (fn [db _]\r\n   (assoc db :modal nil)))\r\n\r\n;; -- Dados --\r\n(rf/reg-event-db\r\n :set-despesas\r\n (fn [db [_ despesas]]\r\n   (assoc db :despesas despesas :loading false)))\r\n\r\n(rf/reg-event-db\r\n :set-entradas\r\n (fn [db [_ entradas]]\r\n   (assoc db :entradas entradas)))\r\n\r\n(rf/reg-event-db\r\n :set-templates\r\n (fn [db [_ templates]]\r\n   (assoc db :templates templates)))\r\n\r\n(rf/reg-event-db\r\n :set-historico\r\n (fn [db [_ despesas entradas]]\r\n   (assoc db\r\n          :despesas-historico despesas\r\n          :entradas-historico entradas)))\r\n\r\n\r\n(rf/reg-event-db\r\n :set-erro\r\n (fn [db [_ erro]]\r\n   (assoc db :erro erro)))\r\n\r\n;; -- L\u00f3gica entradas autom\u00e1ticas --\r\n(defn gerar-entradas-bolso [despesa mes]\r\n  (let [pagadores (:pagadores despesa)\r\n        eh-bolso? (and (seq pagadores)\r\n                       (not (some #(= % \"conjunta\") pagadores)))]\r\n    (when eh-bolso?\r\n      (let [valor-por-pagador (/ (:valor despesa) (count pagadores))\r\n            data-str (let [m (:mes mes)\r\n                           a (:ano mes)\r\n                           d (:dia_do_mes despesa)]\r\n                       (str a \"-\"\r\n                            (when (< m 10) \"0\") m \"-\"\r\n                            (when (< d 10) \"0\") d))]\r\n        (mapv (fn [pid]\r\n                {:id          (str (random-uuid))\r\n                 :pessoa_id   pid\r\n                 :valor       valor-por-pagador\r\n                 :data        data-str\r\n                 :descricao   (str \"Pgto: \" (:descricao despesa))\r\n                 :auto        true\r\n                 :despesa_ref (:id despesa)})\r\n              pagadores)))))\r\n\r\n(defn remover-entradas-auto [db despesa-id]\r\n  (update db :entradas\r\n          (fn [es]\r\n            (vec (remove #(= (:despesa_ref %) despesa-id) es)))))\r\n\r\n;; -- Despesas --\r\n(rf/reg-event-fx\r\n :marcar-pago\r\n (fn [{:keys [db]} [_ id]]\r\n   (let [despesa       (first (filter #(= (:id %) id) (:despesas db)))\r\n         mes           (:mes-atual db)\r\n         entradas-auto (when despesa\r\n                         (gerar-entradas-bolso\r\n                          (assoc despesa :pago true) mes))\r\n         novo-db       (update db :despesas\r\n                               (fn [ds]\r\n                                 (mapv (fn [d]\r\n                                         (if (= (:id d) id)\r\n                                           (assoc d :pago true\r\n                                                  :data_pagamento (.toISOString (js/Date.)))\r\n                                           d))\r\n                                       ds)))]\r\n     (merge\r\n      {:db                  novo-db\r\n       :supabase/marcar-pago id}\r\n      (when (seq entradas-auto)\r\n        {:dispatch-n (mapv (fn [e] [:salvar-entrada e]) entradas-auto)})))))\r\n\r\n(rf/reg-event-fx\r\n :desmarcar-pago\r\n (fn [{:keys [db]} [_ id]]\r\n   (let [novo-db (-> db\r\n                     (update :despesas\r\n                             (fn [ds]\r\n                               (mapv (fn [d]\r\n                                       (if (= (:id d) id)\r\n                                         (assoc d :pago false :data_pagamento nil)\r\n                                         d))\r\n                                     ds)))\r\n                     (remover-entradas-auto id))]\r\n     {:db                    novo-db\r\n      :supabase/desmarcar-pago id\r\n      :supabase/deletar-entradas-auto id})))\r\n\r\n(rf/reg-event-fx\r\n :salvar-despesa\r\n (fn [{:keys [db]} [_ despesa]]\r\n   (let [existe?       (some #(= (:id %) (:id despesa)) (:despesas db))\r\n         novo-db       (update db :despesas\r\n                               (fn [ds]\r\n                                 (if existe?\r\n                                   (mapv (fn [d] (if (= (:id d) (:id despesa)) despesa d)) ds)\r\n                                   (conj (vec ds) despesa))))\r\n         mes           (:mes-atual db)\r\n         entradas-auto (when (:pago despesa)\r\n                         (gerar-entradas-bolso despesa mes))]\r\n     (merge\r\n      {:db                      (assoc novo-db :modal nil)\r\n       :supabase/salvar-despesa despesa}\r\n      (when (seq entradas-auto)\r\n        {:dispatch-n (mapv (fn [e] [:salvar-entrada e]) entradas-auto)})))))\r\n\r\n(rf/reg-event-fx\r\n :deletar-despesa\r\n (fn [{:keys [db]} [_ id]]\r\n   {:db                       (-> db\r\n                                  (update :despesas\r\n                                          (fn [ds] (vec (remove #(= (:id %) id) ds))))\r\n                                  (remover-entradas-auto id))\r\n    :supabase/deletar-despesa id\r\n    :supabase/deletar-entradas-auto id}))\r\n\r\n;; -- Entradas --\r\n(rf/reg-event-fx\r\n :salvar-entrada\r\n (fn [{:keys [db]} [_ entrada]]\r\n   (let [existe? (some #(= (:id %) (:id entrada)) (:entradas db))\r\n         novo-db (update db :entradas\r\n                         (fn [es]\r\n                           (if existe?\r\n                             (mapv (fn [e] (if (= (:id e) (:id entrada)) entrada e)) es)\r\n                             (conj (vec es) entrada))))]\r\n     {:db                     (assoc novo-db :modal nil)\r\n      :supabase/salvar-entrada entrada})))\r\n\r\n(rf/reg-event-fx\r\n :deletar-entrada\r\n (fn [{:keys [db]} [_ id]]\r\n   {:db                      (update db :entradas\r\n                                     (fn [es] (vec (remove #(= (:id %) id) es))))\r\n    :supabase/deletar-entrada id}))\r\n\r\n;; -- Templates --\r\n(rf/reg-event-fx\r\n :salvar-template\r\n (fn [{:keys [db]} [_ template]]\r\n   (let [existe? (some #(= (:id %) (:id template)) (:templates db))\r\n         novo-db (update db :templates\r\n                         (fn [ts]\r\n                           (if existe?\r\n                             (mapv (fn [t] (if (= (:id t) (:id template)) template t)) ts)\r\n                             (conj (vec ts) template))))]\r\n     {:db                      (assoc novo-db :modal nil)\r\n      :supabase/salvar-template template})))\r\n\r\n(rf/reg-event-fx\r\n :deletar-template\r\n (fn [{:keys [db]} [_ id]]\r\n   {:db                       (update db :templates\r\n                                      (fn [ts] (vec (remove #(= (:id %) id) ts))))\r\n    :supabase/deletar-template id}))\r\n\r\n(rf/reg-event-fx\r\n :toggle-template\r\n (fn [{:keys [db]} [_ id]]\r\n   (let [novo-db  (update db :templates\r\n                          (fn [ts]\r\n                            (mapv (fn [t]\r\n                                    (if (= (:id t) id) (update t :ativo not) t))\r\n                                  ts)))\r\n         template (first (filter #(= (:id %) id) (:templates novo-db)))]\r\n     {:db                       novo-db\r\n      :supabase/toggle-template {:id id :ativo (:ativo template)}})))\r\n\r\n(rf/reg-event-fx\r\n :importar-templates\r\n (fn [{:keys [db]} _]\r\n   (let [templates-ativos (filter :ativo (:templates db))\r\n         mes              (:mes-atual db)\r\n         ids-existentes   (set (map :origem_template_id (:despesas db)))\r\n         novas-despesas   (vec (for [t templates-ativos\r\n                                     :when (not (contains? ids-existentes (:id t)))]\r\n                                 {:id                 (str (random-uuid))\r\n                                  :origem_template_id (:id t)\r\n                                  :descricao          (:descricao t)\r\n                                  :valor              (:valor_padrao t)\r\n                                  :dia_do_mes         (or (:dia_padrao t) 1)\r\n                                  :forma_pagamento    (:forma_pagamento_padrao t)\r\n                                  :pagadores          (or (:pagador_padrao t) [\"conjunta\"])\r\n                                  :divisao            (:divisao t)\r\n                                  :pago               false\r\n                                  :ano                (:ano mes)\r\n                                  :mes                (:mes mes)}))]\r\n     {:db         (update db :despesas into novas-despesas)\r\n      :dispatch-n (mapv (fn [d] [:salvar-despesa-silencioso d]) novas-despesas)})))\r\n\r\n(rf/reg-event-fx\r\n :salvar-despesa-silencioso\r\n (fn [_ [_ despesa]]\r\n   {:supabase/salvar-despesa despesa}))\r\n\r\n;; -- Effects Supabase --\r\n(rf/reg-fx\r\n :supabase/sessao\r\n (fn [_]\r\n   (supa/sessao-atual\r\n    (fn [res]\r\n      (if-let [usuario (get-in res [:data :session :user])]\r\n        (rf/dispatch [:usuario-logado usuario])\r\n        (rf/dispatch [:usuario-deslogado]))))))\r\n\r\n(rf/reg-fx\r\n :supabase/login\r\n (fn [{:keys [email senha]}]\r\n   (supa/login! email senha\r\n                (fn [res]\r\n                  (if (:error res)\r\n                    (rf/dispatch [:set-erro \"Email ou senha incorretos\"])\r\n                    (rf/dispatch [:usuario-logado (get-in res [:data :user])]))))))\r\n\r\n(rf/reg-fx\r\n :supabase/logout\r\n (fn [_]\r\n   (supa/logout!\r\n    (fn [_]\r\n      (rf/dispatch [:usuario-deslogado])))))\r\n\r\n(rf/reg-fx\r\n :supabase/buscar-despesas\r\n (fn [{:keys [ano mes]}]\r\n   (supa/buscar-despesas! ano mes\r\n                          (fn [despesas]\r\n                            (rf/dispatch [:set-despesas despesas])))))\r\n\r\n(rf/reg-fx\r\n :supabase/buscar-entradas\r\n (fn [{:keys [ano mes]}]\r\n   (supa/buscar-entradas! ano mes\r\n                          (fn [entradas]\r\n                            (rf/dispatch [:set-entradas entradas])))))\r\n\r\n(rf/reg-fx\r\n :supabase/buscar-templates\r\n (fn [_]\r\n   (supa/buscar-templates!\r\n    (fn [templates]\r\n      (rf/dispatch [:set-templates templates])))))\r\n\r\n(rf/reg-fx\r\n :supabase/salvar-despesa\r\n (fn [despesa]\r\n   (supa/salvar-despesa! despesa\r\n                         (fn [err]\r\n                           (when err\r\n                             (rf/dispatch [:set-erro \"Erro ao salvar despesa\"]))))))\r\n\r\n(rf/reg-fx\r\n :supabase/marcar-pago\r\n (fn [id]\r\n   (supa/marcar-pago! id\r\n                      (fn [err]\r\n                        (when err\r\n                          (rf/dispatch [:set-erro \"Erro ao marcar como pago\"]))))))\r\n\r\n(rf/reg-fx\r\n :supabase/desmarcar-pago\r\n (fn [id]\r\n   (supa/desmarcar-pago! id\r\n                         (fn [err]\r\n                           (when err\r\n                             (rf/dispatch [:set-erro \"Erro ao desmarcar pagamento\"]))))))\r\n\r\n(rf/reg-fx\r\n :supabase/salvar-entrada\r\n (fn [entrada]\r\n   (supa/salvar-entrada! entrada\r\n                         (fn [err]\r\n                           (when err\r\n                             (rf/dispatch [:set-erro \"Erro ao salvar entrada\"]))))))\r\n\r\n(rf/reg-fx\r\n :supabase/deletar-entrada\r\n (fn [id]\r\n   (supa/deletar! \"entradas\" id)))\r\n\r\n(rf/reg-fx\r\n :supabase/deletar-entradas-auto\r\n (fn [despesa-id]\r\n   (supa/deletar-entradas-auto! despesa-id)))\r\n\r\n(rf/reg-fx\r\n :supabase/salvar-template\r\n (fn [template]\r\n   (supa/salvar-template! template\r\n                          (fn [err]\r\n                            (when err\r\n                              (rf/dispatch [:set-erro \"Erro ao salvar template\"]))))))\r\n\r\n(rf/reg-fx\r\n :supabase/toggle-template\r\n (fn [{:keys [id ativo]}]\r\n   (supa/toggle-template! id ativo\r\n                          (fn [err]\r\n                            (when err\r\n                              (rf/dispatch [:set-erro \"Erro ao atualizar template\"]))))))\r\n\r\n(rf/reg-fx\r\n :supabase/deletar-despesa\r\n (fn [id]\r\n   (supa/deletar! \"despesa_mensal\" id)))\r\n\r\n(rf/reg-fx\r\n :supabase/deletar-template\r\n (fn [id]\r\n   (supa/deletar! \"template_despesa\" id)))\r\n\r\n(rf/reg-fx\r\n :supabase/buscar-historico\r\n (fn [_]\r\n   (supa/buscar-todas-despesas!\r\n    (fn [despesas]\r\n      (supa/buscar-todas-entradas!\r\n       (fn [entradas]\r\n         (rf/dispatch [:set-historico despesas entradas])))))))\r\n\r\n(rf/reg-fx\r\n :dispatch-n\r\n (fn [events]\r\n   (doseq [e events]\r\n     (rf/dispatch e))))\r\n\r\n(rf/reg-fx\r\n :supabase/buscar-configuracoes\r\n (fn [_]\r\n   (supa/buscar-configuracoes!\r\n    (fn [configs]\r\n      (rf/dispatch [:set-configuracoes configs])))))\r\n\r\n(rf/reg-event-db\r\n :set-configuracoes\r\n (fn [db [_ configs]]\r\n   (u/reset-cores! configs)\r\n   (assoc db :configuracoes configs)))\r\n\r\n(rf/reg-event-fx\r\n :salvar-cor-pessoa\r\n (fn [{:keys [db]} [_ pessoa-id cor]]\r\n   (let [chave (str \"cor_\" pessoa-id)]\r\n     (swap! u/cores-pessoas assoc chave cor)\r\n     {:db (assoc-in db [:configuracoes chave] cor)\r\n      :supabase/salvar-configuracao {:chave chave :valor cor}})))\r\n\r\n(rf/reg-fx\r\n :supabase/salvar-configuracao\r\n (fn [{:keys [chave valor]}]\r\n   (supa/salvar-configuracao! chave valor\r\n                              (fn [] (js/console.log \"Configura\u00e7\u00e3o salva\")))))\r\n\r\n(rf/reg-fx\r\n :supabase/buscar-categorias\r\n (fn [_]\r\n   (supa/buscar-categorias!\r\n    (fn [cats]\r\n      (rf/dispatch [:set-categorias cats])))))\r\n\r\n(rf/reg-event-db\r\n :set-categorias\r\n (fn [db [_ cats]]\r\n   (assoc db :categorias cats)))\r\n\r\n(rf/reg-event-fx\r\n :salvar-categoria\r\n (fn [{:keys [db]} [_ categoria]]\r\n   {:supabase/salvar-categoria categoria}))\r\n\r\n(rf/reg-fx\r\n :supabase/salvar-categoria\r\n (fn [categoria]\r\n   (supa/salvar-categoria! categoria\r\n                           (fn [] (rf/dispatch [:carregar-dados])))))"]}