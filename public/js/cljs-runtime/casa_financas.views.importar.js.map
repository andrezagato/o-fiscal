{"version":3,"sources":["casa_financas/views/importar.cljs"],"mappings":"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","names":["casa-financas.views.importar/parse-valor","s","and__5140__auto__","cljs.core.not_EQ_","clojure.string/replace","clojure.string/trim","js/parseFloat","casa-financas.views.importar/parse-data","parts","clojure.string.split","cljs.core._EQ_","cljs.core/count","dia","cljs.core.get","mes","ano","casa-financas.views.importar/parse-mes-ano","data-str","casa-financas.views.importar/parse-pagador","G__17217","clojure.string/lower-case","or__5142__auto__","casa-financas.views.importar/parse-usuario","G__17229","casa-financas.views.importar/parse-metodo","clojure.string/includes?","casa-financas.views.importar/parse-divisao","casa-financas.utils/divisao-padrao","casa-financas.views.importar/parse-csv","texto","linhas","clojure.string/split-lines","p1__17252#","cljs.core.filter","cljs.core/rest","casa-financas.views.importar/parse-linha-despesa","linha","cols","p1__17261#","cljs.core.mapv","data-map","casa-financas.utils/gerar-id","casa-financas.views.importar/parse-linha-entrada","p1__17275#","casa-financas.views.importar/tabela-preview-despesas","despesas","iter__5628__auto__","s__17284","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5626__auto__","size__5627__auto__","b__17286","cljs.core/chunk-buffer","i__17285","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__17283","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","d","casa-financas.utils/formatar-valor-br","casa-financas.views.importar/tabela-preview-entradas","entradas","s__17300","b__17302","i__17301","iter__17299","e","casa-financas.components.comum/chip-pessoa","casa-financas.views.importar/importar","aba","reagent.core.atom","csv-texto","preview","importando","importado","cljs.core/deref","p1__17315#","casa-financas.components.comum/seletor-mes","cljs.core/reset!","casa-financas.components.comum/botao-secundario","parsed","cljs.core/filterv","cljs.core/some?","cljs.core/not","casa-financas.components.comum/botao-primario","tipo","seq__17325","chunk__17326","count__17327","i__17328","c__5673__auto__","cljs.core/chunk-first","cljs.core/next","item","re-frame.core/dispatch","js/setTimeout"],"sourcesContent":["(ns casa-financas.views.importar\r\n  (:require [re-frame.core :as rf]\r\n            [reagent.core :as r]\r\n            [casa-financas.utils :as u]\r\n            [casa-financas.components.comum :as c]))\r\n\r\n(defn parse-valor [s]\r\n  (when (and s (not= s \"\"))\r\n    (-> s\r\n        (clojure.string/replace \"R$ \" \"\")\r\n        (clojure.string/replace \".\" \"\")\r\n        (clojure.string/replace \",\" \".\")\r\n        (clojure.string/trim)\r\n        js/parseFloat)))\r\n\r\n(defn parse-data [s]\r\n  (when (and s (not= s \"\"))\r\n    (let [parts (clojure.string/split (clojure.string/trim s) #\"/\")]\r\n      (when (= 3 (count parts))\r\n        (let [dia (get parts 0)\r\n              mes (get parts 1)\r\n              ano (get parts 2)]\r\n          (str ano \"-\" mes \"-\" dia))))))\r\n\r\n(defn parse-mes-ano [data-str]\r\n  (when data-str\r\n    (let [parts (clojure.string/split data-str #\"-\")]\r\n      {:ano (int (get parts 0))\r\n       :mes (int (get parts 1))\r\n       :dia (int (get parts 2))})))\r\n\r\n(defn parse-pagador [s]\r\n  (case (clojure.string/trim (clojure.string/lower-case (or s \"\")))\r\n    \"conjunta\" \"conjunta\"\r\n    \"casa\"     \"conjunta\"\r\n    \"andre\"    \"andre\"\r\n    \"bia\"      \"bianca\"\r\n    \"bianca\"   \"bianca\"\r\n    \"fernanda\" \"fernanda\"\r\n    \"bruna\"    \"bruna\"\r\n    \"conjunta\"))\r\n\r\n(defn parse-usuario [s]\r\n  (case (clojure.string/trim (clojure.string/lower-case (or s \"\")))\r\n    \"andre\"    \"andre\"\r\n    \"bia\"      \"bianca\"\r\n    \"bianca\"   \"bianca\"\r\n    \"fernanda\" \"fernanda\"\r\n    \"bruna\"    \"bruna\"\r\n    \"andre\"))\r\n\r\n(defn parse-metodo [s]\r\n  (let [s (clojure.string/lower-case (clojure.string/trim (or s \"\")))]\r\n    (if (clojure.string/includes? s \"cred\") \"credito\" \"pix\")))\r\n\r\n(defn parse-divisao [s]\r\n  (let [s     (clojure.string/trim (or s \"25/25/25/25\"))\r\n        parts (clojure.string/split s #\"/\")]\r\n    (if (= 4 (count parts))\r\n      {:andre    (int (get parts 0))\r\n       :bianca   (int (get parts 1))\r\n       :fernanda (int (get parts 2))\r\n       :bruna    (int (get parts 3))}\r\n      (u/divisao-padrao))))\r\n\r\n(defn parse-csv [texto]\r\n  (let [linhas (clojure.string/split-lines (clojure.string/trim texto))\r\n        linhas (filter #(not= % \"\") linhas)]\r\n    (rest linhas))) ;; remove cabe\u00e7alho\r\n\r\n(defn parse-linha-despesa [linha]\r\n  (let [cols (clojure.string/split linha #\",(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)\")\r\n        cols (mapv #(clojure.string/replace % \"\\\"\" \"\") cols)\r\n        data-str (parse-data (get cols 0))\r\n        data-map (parse-mes-ano data-str)]\r\n    (when (and data-str data-map)\r\n      {:id              (u/gerar-id)\r\n       :descricao       (clojure.string/trim (get cols 1 \"\"))\r\n       :valor           (parse-valor (get cols 2))\r\n       :forma_pagamento (parse-metodo (get cols 3))\r\n       :pagadores       [(parse-pagador (get cols 4))]\r\n       :divisao         (parse-divisao (get cols 5))\r\n       :pago            (= \"sim\" (clojure.string/lower-case\r\n                                  (clojure.string/trim (get cols 6 \"\"))))\r\n       :ano             (:ano data-map)\r\n       :mes             (:mes data-map)\r\n       :dia_do_mes      (:dia data-map)})))\r\n\r\n(defn parse-linha-entrada [linha]\r\n  (let [cols     (clojure.string/split linha #\",(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)\")\r\n        cols     (mapv #(clojure.string/replace % \"\\\"\" \"\") cols)\r\n        data-str (parse-data (get cols 0))]\r\n    (when data-str\r\n      {:id        (u/gerar-id)\r\n       :pessoa_id (parse-usuario (get cols 1))\r\n       :valor     (parse-valor (get cols 2))\r\n       :data      data-str\r\n       :descricao \"\"})))\r\n\r\n(defn tabela-preview-despesas [despesas]\r\n  [:div {:class \"overflow-x-auto\"}\r\n   [:table {:class \"w-full text-xs\"}\r\n    [:thead\r\n     [:tr {:class \"border-b border-gray-200\"}\r\n      [:th {:class \"text-left py-1.5 text-gray-500 font-medium\"} \"Data\"]\r\n      [:th {:class \"text-left py-1.5 text-gray-500 font-medium\"} \"Descri\u00e7\u00e3o\"]\r\n      [:th {:class \"text-right py-1.5 text-gray-500 font-medium\"} \"Valor\"]\r\n      [:th {:class \"text-center py-1.5 text-gray-500 font-medium\"} \"Pago\"]]]\r\n    [:tbody\r\n     (for [d despesas]\r\n       ^{:key (:id d)}\r\n       [:tr {:class \"border-b border-gray-50\"}\r\n        [:td {:class \"py-1.5 text-gray-600\"}\r\n         (str (:dia_do_mes d) \"/\" (:mes d) \"/\" (:ano d))]\r\n        [:td {:class \"py-1.5 text-gray-800 max-w-24 truncate\"} (:descricao d)]\r\n        [:td {:class \"py-1.5 text-right text-gray-800\"} (u/formatar-valor-br (:valor d))]\r\n        [:td {:class \"py-1.5 text-center\"}\r\n         (if (:pago d)\r\n           [:span {:class \"text-green-500\"} \"\u2713\"]\r\n           [:span {:class \"text-gray-300\"} \"\u2013\"])]])]]])\r\n\r\n(defn tabela-preview-entradas [entradas]\r\n  [:div {:class \"overflow-x-auto\"}\r\n   [:table {:class \"w-full text-xs\"}\r\n    [:thead\r\n     [:tr {:class \"border-b border-gray-200\"}\r\n      [:th {:class \"text-left py-1.5 text-gray-500 font-medium\"} \"Data\"]\r\n      [:th {:class \"text-left py-1.5 text-gray-500 font-medium\"} \"Pessoa\"]\r\n      [:th {:class \"text-right py-1.5 text-gray-500 font-medium\"} \"Valor\"]]]\r\n    [:tbody\r\n     (for [e entradas]\r\n       ^{:key (:id e)}\r\n       [:tr {:class \"border-b border-gray-50\"}\r\n        [:td {:class \"py-1.5 text-gray-600\"} (:data e)]\r\n        [:td {:class \"py-1.5\"}\r\n         [c/chip-pessoa (:pessoa_id e)]]\r\n        [:td {:class \"py-1.5 text-right text-green-600 font-medium\"}\r\n         (u/formatar-valor-br (:valor e))]])]]])\r\n\r\n(defn importar []\r\n  (let [aba          (r/atom :despesas)\r\n        csv-texto    (r/atom \"\")\r\n        preview      (r/atom nil)\r\n        importando   (r/atom false)\r\n        importado    (r/atom false)]\r\n    (fn []\r\n      [:div {:class \"flex flex-col pb-24\"}\r\n       [c/seletor-mes]\r\n       [:div {:class \"p-3 space-y-3\"}\r\n\r\n        ;; T\u00edtulo\r\n        [:div {:class \"bg-white rounded-2xl p-4 border border-gray-100 shadow-sm\"}\r\n         [:h2 {:class \"font-bold text-gray-800 mb-1\"} \"Importar do CSV\"]\r\n         [:p {:class \"text-xs text-gray-500\"}\r\n          \"Cole o conte\u00fado do CSV exportado do Google Sheets. Inclua o cabe\u00e7alho.\"]]\r\n\r\n        ;; Toggle despesas/entradas\r\n        [:div {:class \"flex gap-2 p-1.5 bg-white rounded-2xl border border-gray-100 shadow-sm\"}\r\n         [:button {:class    (str \"flex-1 py-1.5 rounded-xl text-sm font-medium transition-colors \"\r\n                                  (if (= @aba :despesas)\r\n                                    \"bg-blue-500 text-white\"\r\n                                    \"text-gray-500\"))\r\n                   :on-click #(do (reset! aba :despesas)\r\n                                  (reset! preview nil)\r\n                                  (reset! csv-texto \"\")\r\n                                  (reset! importado false))}\r\n          \"\ud83d\udcb8 Despesas\"]\r\n         [:button {:class    (str \"flex-1 py-1.5 rounded-xl text-sm font-medium transition-colors \"\r\n                                  (if (= @aba :entradas)\r\n                                    \"bg-blue-500 text-white\"\r\n                                    \"text-gray-500\"))\r\n                   :on-click #(do (reset! aba :entradas)\r\n                                  (reset! preview nil)\r\n                                  (reset! csv-texto \"\")\r\n                                  (reset! importado false))}\r\n          \"\ud83d\udcb0 Entradas\"]]\r\n\r\n        ;; \u00c1rea de texto CSV\r\n        [:div {:class \"bg-white rounded-2xl border border-gray-100 shadow-sm p-3\"}\r\n         [:label {:class \"text-xs font-medium text-gray-500 mb-1.5 block\"}\r\n          (if (= @aba :despesas)\r\n            \"Cole o CSV de Despesas aqui:\"\r\n            \"Cole o CSV de Entradas aqui:\")]\r\n         [:textarea {:class       \"w-full h-32 border border-gray-200 rounded-xl px-3 py-2 text-xs font-mono focus:outline-none focus:ring-2 focus:ring-blue-300 resize-none\"\r\n                     :placeholder (if (= @aba :despesas)\r\n                                    \"Gastos,Descri\u00e7\u00e3o,Valor,M\u00e9todo,Pago Por,Forma de Divis\u00e3o,Quitado\\n23/02/2026,Mercado,\\\"R$ 150,00\\\",Cr\u00e9dito,Conjunta,25/25/25/25,\"\r\n                                    \"Entradas,Usu\u00e1rio,Valor\\n05/02/2026,Andre,\\\"R$ 3.000,00\\\"\")\r\n                     :value       @csv-texto\r\n                     :on-change   #(do (reset! csv-texto (.. % -target -value))\r\n                                       (reset! preview nil)\r\n                                       (reset! importado false))}]]\r\n\r\n        ;; Bot\u00e3o preview\r\n        (when (not= @csv-texto \"\")\r\n          [c/botao-secundario \"\ud83d\udc41 Visualizar Preview\"\r\n           #(let [linhas (parse-csv @csv-texto)\r\n                  parsed (if (= @aba :despesas)\r\n                           (filterv some? (mapv parse-linha-despesa linhas))\r\n                           (filterv some? (mapv parse-linha-entrada linhas)))]\r\n              (reset! preview parsed))\r\n           {:class \"\"}])\r\n\r\n        ;; Preview\r\n        (when @preview\r\n          [:div {:class \"bg-white rounded-2xl border border-gray-100 shadow-sm p-3\"}\r\n           [:div {:class \"flex justify-between items-center mb-2\"}\r\n            [:p {:class \"text-xs font-medium text-gray-600\"}\r\n             (str (count @preview) \" registros encontrados\")]\r\n            (when @importado\r\n              [:span {:class \"text-xs text-green-600 font-medium\"} \"\u2713 Importado!\"])]\r\n           (if (= @aba :despesas)\r\n             [tabela-preview-despesas @preview]\r\n             [tabela-preview-entradas @preview])\r\n           ;; Bot\u00e3o importar\r\n           (when (and (seq @preview) (not @importado))\r\n             [:div {:class \"mt-3\"}\r\n              [c/botao-primario\r\n               (if @importando \"Importando...\" (str \"\u2b06 Importar \" (count @preview) \" registros\"))\r\n               (let [tipo @aba]\r\n                 #(when (not @importando)\r\n                    (reset! importando true)\r\n                    (doseq [item @preview]\r\n                      (if (= tipo :despesas)\r\n                        (rf/dispatch [:salvar-despesa item])\r\n                        (rf/dispatch [:salvar-entrada item])))\r\n                    (js/setTimeout\r\n                     (fn []\r\n                       (reset! importando false)\r\n                       (reset! importado true)\r\n                       (rf/dispatch [:carregar-dados]))\r\n                     2000)))\r\n               {:disabled @importando}]])])]])))"]}