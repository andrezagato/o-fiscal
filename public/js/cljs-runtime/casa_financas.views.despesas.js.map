{"version":3,"sources":["casa_financas/views/despesas.cljs"],"mappings":"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","names":["casa-financas.views.despesas/item-despesa","despesa","fatura","vec__26588","cljs.core.nth","eh-credito?","cljs.core._EQ_","fatura-status","total-pago","or__5142__auto__","total","status","casa-financas.utils/despesa-status","bg-class","border-class","G__26593","cljs.core/Keyword","js/Error","casa-financas.components.comum/barra-divisao","re-frame.core/dispatch","iter__5628__auto__","s__26600","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5626__auto__","size__5627__auto__","cljs.core/count","b__26602","cljs.core/chunk-buffer","i__26601","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__26599","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","pid","casa-financas.utils/pessoa-cor","casa-financas.utils/pessoa-inicial","casa-financas.utils/formatar-valor-br","e","casa-financas.views.despesas/card-fatura","total-credito","valor-pago","G__26648","G__26654","G__26656","casa-financas.views.despesas/despesas","filtro","reagent.core.atom","cljs.core/deref","despesas-mes","re_frame.core.subscribe","tem-credito?","templates","despesas-filtradas","G__26667","p1__26661#","cljs.core.filter","cljs.core/not","cljs.core.not_EQ_","casa-financas.components.comum/seletor-mes","s__26673","b__26675","i__26674","vec__26683","iter__26672","vec__26690","k","label","cljs.core/reset!","cljs.core/empty?","despesas-ordenadas","cljs.core.sort_by","d","antes-23","p1__26664#","partir-23","p1__26665#","s__26701","b__26703","i__26702","iter__26700","s__26716","b__26718","i__26717","iter__26715","cljs.core/chunk-first"],"sourcesContent":["(ns casa-financas.views.despesas\n  (:require [re-frame.core :as rf]\n            [reagent.core :as r]\n            [casa-financas.utils :as u]\n            [casa-financas.components.comum :as c]))\n\n(defn item-despesa [despesa fatura]\n  (let [eh-credito? (= (:forma_pagamento despesa) \"credito\")\n        ;; Status da fatura para colorir cards de cr\u00e9dito\n        fatura-status (when eh-credito?\n                        (let [total-pago (or (:valor_pago fatura) 0)\n                              total      (or (:valor_total fatura) 0)]\n                          (cond\n                            (and (> total 0) (>= total-pago total)) :paga\n                            (> total-pago 0)                        :parcial\n                            :else                                    :pendente)))\n        status (if eh-credito?\n                 (or fatura-status :pendente)\n                 (u/despesa-status despesa))\n        [bg-class border-class] (case status\n                                  :paga    [\"bg-green-50\" \"border-green-100\"]\n                                  :parcial [\"bg-amber-50\" \"border-amber-200\"]\n                                  :vencida [\"bg-red-50\"   \"border-red-200\"]\n                                  :pendente [\"bg-white\"   \"border-gray-100\"])]\n    [:div {:class (str \"rounded-xl border overflow-hidden mb-2 shadow-sm \" bg-class \" \" border-class)}\n     [c/barra-divisao (:divisao despesa)]\n     [:div {:class    \"flex items-center gap-2 px-3 py-2.5\"\n            :on-click #(rf/dispatch [:abrir-modal :editar-despesa despesa])}\n      [:div {:class \"flex flex-col items-center w-6 flex-shrink-0\"}\n       [:span {:class \"text-xs font-bold text-gray-700 leading-none\"} (:dia_do_mes despesa)]]\n      [:div {:class \"w-px h-8 bg-gray-200 flex-shrink-0\"}]\n      [:div {:class \"flex-1 min-w-0\"}\n       [:p {:class (str \"font-semibold text-sm truncate mb-0.5 \"\n                        (if (= status :paga) \"line-through text-gray-400 text-lg\" \"text-gray-800 text-lg\"))}\n        (:descricao despesa)]\n       [:div {:class \"flex items-center gap-1.5\"}\n        (for [pid (:pagadores despesa)]\n          ^{:key pid}\n          [:span {:class \"text-xs px-1.5 py-0.5 rounded-full font-medium\"\n                  :style {:background-color (str (u/pessoa-cor pid) \"20\")\n                          :color            (u/pessoa-cor pid)}}\n           (if (= pid \"conjunta\") \"Casa\" (u/pessoa-inicial pid))])\n        [:span {:class \"text-xs text-gray-400\"}\n         (if eh-credito? \"cred\" \"pix\")]\n        (when (= status :vencida)\n          [:span {:class \"text-xs text-red-500 font-medium\"} \"atrasada\"])]]\n      [:div {:class \"flex items-center gap-2 flex-shrink-0\"}\n       [:span {:class (str \"font-semibold text-sm \"\n                           (if (= status :vencida) \"text-red-600\" \"text-gray-800\"))}\n        (u/formatar-valor-br (:valor despesa))]\n       ;; Checkbox \u2014 desabilitado para cr\u00e9dito\n       [:button {:class    (str \"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors \"\n                                (cond\n                                  (and eh-credito? (= status :paga))    \"bg-green-400 border-green-400 opacity-50 cursor-not-allowed\"\n                                  (and eh-credito? (= status :parcial)) \"bg-amber-400 border-amber-400 opacity-50 cursor-not-allowed\"\n                                  eh-credito?                           \"border-gray-200 opacity-30 cursor-not-allowed\"\n                                  (= status :paga)                      \"bg-green-400 border-green-400\"\n                                  (= status :vencida)                   \"border-red-300\"\n                                  :else                                  \"border-gray-300\"))\n                 :disabled eh-credito?\n                 :on-click (fn [e]\n                             (.stopPropagation e)\n                             (when (not eh-credito?)\n                               (if (:pago despesa)\n                                 (rf/dispatch [:desmarcar-pago (:id despesa)])\n                                 (rf/dispatch [:marcar-pago (:id despesa)]))))}\n        (when (or (and (not eh-credito?) (= status :paga))\n                  (and eh-credito? (= status :paga)))\n          [:span {:class \"text-white text-xs font-bold\"} \"\u2713\"])]]]]))\n\n(defn card-fatura [fatura total-credito]\n  (let [valor-pago  (or (:valor_pago fatura) 0)\n        status      (cond\n                      (>= valor-pago total-credito) :paga\n                      (> valor-pago 0)              :parcial\n                      :else                         :pendente)]\n    [:div {:class (str \"rounded-xl border overflow-hidden mb-2 shadow-sm \"\n                       (case status\n                         :paga    \"bg-green-50 border-green-200\"\n                         :parcial \"bg-amber-50 border-amber-200\"\n                         :pendente \"bg-white border-gray-100\"))}\n     [:div {:class \"h-1 bg-blue-400\"}]\n     [:div {:class    \"flex items-center gap-2 px-3 py-2.5\"\n            :on-click #(rf/dispatch [:abrir-modal :pagamento-fatura fatura])}\n      [:div {:class \"flex flex-col items-center w-6 flex-shrink-0\"}\n       [:span {:class \"text-xs font-bold text-gray-700 leading-none\"} \"23\"]]\n      [:div {:class \"w-px h-8 bg-gray-200 flex-shrink-0\"}]\n      [:div {:class \"flex-1 min-w-0\"}\n       [:p {:class \"font-semibold text-sm text-gray-800 text-lg\"} \"\ud83d\udcb3 Fatura Cart\u00e3o\"]\n       [:div {:class \"flex items-center gap-1.5\"}\n        (case status\n          :paga    [:span {:class \"text-xs text-green-600 font-medium\"} \"pago\"]\n          :parcial [:span {:class \"text-xs text-amber-600 font-medium\"}\n                    (str \"pago \" (u/formatar-valor-br valor-pago))]\n          [:span {:class \"text-xs text-gray-400\"} \"pendente\"])]]\n      [:div {:class \"flex items-center gap-2 flex-shrink-0\"}\n       [:span {:class \"font-semibold text-sm text-gray-800\"}\n        (u/formatar-valor-br total-credito)]\n       [:button {:class    (str \"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors \"\n                                (case status\n                                  :paga    \"bg-green-400 border-green-400\"\n                                  :parcial \"bg-amber-400 border-amber-400\"\n                                  \"border-gray-300\"))\n                 :on-click (fn [e]\n                             (.stopPropagation e)\n                             (rf/dispatch [:abrir-modal :pagamento-fatura fatura]))}\n        (when (= status :paga)\n          [:span {:class \"text-white text-xs font-bold\"} \"\u2713\"])]]]]))\n\n(defn despesas []\n  (let [filtro (r/atom :todas)]\n    (fn []\n      (let [despesas-mes    @(rf/subscribe [:despesas-do-mes])\n            fatura          @(rf/subscribe [:fatura])\n            total-credito   @(rf/subscribe [:total-credito-mes])\n            tem-credito?    (> total-credito 0)\n            templates       @(rf/subscribe [:templates])\n            despesas-filtradas (case @filtro\n                                 :todas     despesas-mes\n                                 :pendentes (filter #(and (not (:pago %))\n                                                          (not= (:forma_pagamento %) \"credito\"))\n                                                    despesas-mes)\n                                 :pagas     (filter :pago despesas-mes))]\n        [:div {:class \"flex flex-col pb-24\"}\n         [c/seletor-mes]\n         [:div {:class \"p-3\"}\n          [:div {:class \"flex gap-1 p-1.5 bg-white rounded-2xl border border-gray-100 shadow-sm mb-3\"}\n           (for [[k label] [[:todas \"Todas\"] [:pendentes \"Pendentes\"] [:pagas \"Pagas\"]]]\n             ^{:key k}\n             [:button {:class    (str \"flex-1 py-1.5 rounded-xl text-sm font-medium transition-colors \"\n                                      (if (= @filtro k)\n                                        \"bg-blue-500 text-white\"\n                                        \"text-gray-500\"))\n                       :on-click #(reset! filtro k)}\n              label])]\n          (if (empty? despesas-filtradas)\n            [:div {:class \"flex flex-col items-center justify-center py-12 text-gray-400\"}\n             [:span {:class \"text-4xl mb-3\"} \"\ud83d\udcb8\"]\n             [:p {:class \"font-medium\"} \"Nenhuma despesa\"]\n             [:p {:class \"text-sm mb-4\"} \"Toque no + para adicionar\"]\n             (when (seq templates)\n               [:button {:class    \"px-4 py-2 bg-blue-50 text-blue-600 rounded-xl text-sm font-medium\"\n                         :on-click #(rf/dispatch [:importar-templates])}\n                \"\ud83d\udccb Importar Templates\"])]\n            [:div\n             (let [despesas-ordenadas (sort-by (fn [d]\n                                                 [(or (:ano_compra d) (:ano d))\n                                                  (or (:mes_compra d) (:mes d))\n                                                  (:dia_do_mes d)])\n                                               despesas-filtradas)\n                   antes-23 (filter #(< (:dia_do_mes %) 23) despesas-ordenadas)\n                   partir-23 (filter #(>= (:dia_do_mes %) 23) despesas-ordenadas)]\n               [:<>\n                (for [d antes-23]\n                  ^{:key (:id d)}\n                  [item-despesa d fatura])\n                (when (and tem-credito? (= @filtro :todas))\n                  [card-fatura fatura total-credito])\n                (for [d partir-23]\n                  ^{:key (:id d)}\n                  [item-despesa d fatura])])\n             (when (seq templates)\n               [:button {:class    \"w-full mt-2 py-2.5 rounded-xl text-sm font-medium text-blue-600 bg-blue-50 border border-blue-100\"\n                         :on-click #(rf/dispatch [:importar-templates])}\n                \"\ud83d\udccb Importar Templates do M\u00eas\"])])]]))))"]}