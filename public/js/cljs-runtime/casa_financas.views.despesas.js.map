{"version":3,"sources":["casa_financas/views/despesas.cljs"],"mappings":"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","names":["casa-financas.views.despesas/item-despesa","despesa","status","casa-financas.utils/despesa-status","cor-bg","casa-financas.utils/status-cor","re-frame.core/dispatch","iter__5628__auto__","s__12956","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5626__auto__","size__5627__auto__","cljs.core/count","b__12958","cljs.core/chunk-buffer","i__12957","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__12955","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","pid","casa-financas.components.comum/chip-pessoa","casa-financas.utils/formatar-valor-br","e","casa-financas.components.comum/barra-divisao","casa-financas.views.despesas/despesas","filtro","reagent.core.atom","cljs.core/deref","despesas-mes","re_frame.core.subscribe","templates","despesas-filtradas","G__12960","cljs.core/Keyword","js/Error","p1__12959#","cljs.core.filter","cljs.core/not","casa-financas.components.comum/seletor-mes","s__12962","b__12964","i__12963","vec__12965","cljs.core.nth","iter__12961","vec__12968","k","label","cljs.core._EQ_","cljs.core/reset!","cljs.core/empty?","s__12972","b__12974","i__12973","iter__12971","d","cljs.core.sort_by","cljs.core/chunk-first"],"sourcesContent":["(ns casa-financas.views.despesas\n  (:require [re-frame.core :as rf]\n            [reagent.core :as r]\n            [casa-financas.utils :as u]\n            [casa-financas.components.comum :as c]))\n\n(defn item-despesa [despesa]\n  (let [status (u/despesa-status despesa)\n        cor-bg (u/status-cor status)]\n    [:div {:class (str \"rounded-xl border p-3 mb-2 \" cor-bg)}\n     [:div {:class    \"flex items-center gap-3\"\n            :on-click #(rf/dispatch [:abrir-modal :editar-despesa despesa])}\n      [:div {:class \"flex flex-col items-center w-7 flex-shrink-0\"}\n       [:span {:class \"text-xs text-gray-400\"} \"dia\"]\n       [:span {:class \"font-bold text-gray-700 text-sm\"} (:dia_do_mes despesa)]]\n      [:div {:class \"flex-1 min-w-0\"}\n       [:p {:class \"font-medium text-gray-800 text-sm truncate\"} (:descricao despesa)]\n       [:div {:class \"flex items-center gap-1 mt-0.5 flex-wrap\"}\n        (for [pid (:pagadores despesa)]\n          ^{:key pid}\n          [c/chip-pessoa pid])\n        [:span {:class \"text-xs text-gray-400\"} (:forma_pagamento despesa)]]]\n      [:div {:class \"flex flex-col items-end gap-1.5\"}\n       [:span {:class \"font-bold text-gray-800 text-sm\"} (u/formatar-valor-br (:valor despesa))]\n       ;; Bot\u00e3o toggle pago/n\u00e3o pago \u2014 sem abrir modal\n       [:button {:class    (str \"w-7 h-7 rounded-full border-2 flex items-center justify-center transition-colors \"\n                                (if (:pago despesa)\n                                  \"bg-green-400 border-green-400\"\n                                  \"border-gray-300 active:bg-green-100\"))\n                 :on-click (fn [e]\n                             (.stopPropagation e)\n                             (if (:pago despesa)\n                               (rf/dispatch [:desmarcar-pago (:id despesa)])\n                               (rf/dispatch [:marcar-pago (:id despesa)])))}\n        [:span {:class (str \"text-xs font-bold \"\n                            (if (:pago despesa) \"text-white\" \"text-gray-400\"))} \"\u2713\"]]]]\n     [:div {:class \"mt-1.5\"}\n      [c/barra-divisao (:divisao despesa)]]]))\n\n(defn despesas []\n  (let [filtro (r/atom :todas)]\n    (fn []\n      (let [despesas-mes       @(rf/subscribe [:despesas-do-mes])\n            templates          @(rf/subscribe [:templates])\n            despesas-filtradas (case @filtro\n                                 :todas     despesas-mes\n                                 :pendentes (filter #(not (:pago %)) despesas-mes)\n                                 :pagas     (filter :pago despesas-mes))]\n        [:div {:class \"flex flex-col pb-24\"}\n         [c/seletor-mes]\n\n         \n         ;; Filtro toggle\n         [:div {:class \"p-3\"}\n          [:div {:class \"flex gap-1 p-1.5 bg-white rounded-2xl border border-gray-100 shadow-sm\"}\n           (for [[k label] [[:todas \"Todas\"] [:pendentes \"Pendentes\"] [:pagas \"Pagas\"]]]\n             ^{:key k}\n             [:button {:class    (str \"flex-1 py-1.5 rounded-xl text-sm font-medium transition-colors \"\n                                      (if (= @filtro k)\n                                        \"bg-blue-500 text-white\"\n                                        \"text-gray-500 hover:bg-gray-100\"))\n                       :on-click #(reset! filtro k)}\n              label])]]\n         \n         ;; Lista\n         [:div {:class \"p-3\"}\n          (if (empty? despesas-filtradas)\n            [:div {:class \"flex flex-col items-center justify-center py-12 text-gray-400\"}\n             [:span {:class \"text-4xl mb-3\"} \"\ud83d\udcb8\"]\n             [:p {:class \"font-medium\"} \"Nenhuma despesa\"]\n             [:p {:class \"text-sm mb-4\"} \"Toque no + para adicionar\"]\n             (when (seq templates)\n               [:button {:class    \"px-4 py-2 bg-blue-50 text-blue-600 rounded-xl text-sm font-medium active:bg-blue-100\"\n                         :on-click #(rf/dispatch [:importar-templates])}\n                \"\ud83d\udccb Importar Templates\"])]\n            [:div\n             (for [d (sort-by :dia_do_mes despesas-filtradas)]\n               ^{:key (:id d)}\n               [item-despesa d])\n             (when (seq templates)\n               [:button {:class    \"w-full mt-2 py-2.5 rounded-xl text-sm font-medium text-blue-600 bg-blue-50 active:bg-blue-100 border border-blue-100\"\n                         :on-click #(rf/dispatch [:importar-templates])}\n                \"\ud83d\udccb Importar Templates do M\u00eas\"])])]]))))"]}