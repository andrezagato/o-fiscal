{"version":3,"sources":["casa_financas/views/despesas.cljs"],"mappings":";AAMA,4CAAA,5CAAMA,gGAAcC;AAApB,AACE,IAAMG,SAAO,AAACC,mCAAiBJ;IAA/BC,aAC8B,iBAAAM,WAAMJ;IAANI,eAAA,EAAA,CAAAA,oBAAAC,oBAAA,AAAAD,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,0FAAA,cAAA;;;KAAA;AAAA,0FAAA,YAAA;;;KAAA;AAAA,0FAAA,WAAA;;;;AAAA,MAAA,KAAAE,MAAA,IAAA,mEAAAF;;;;eAD9B,AAAAL,4CAAAD,WAAA,IAAA,tEACOI;mBADP,AAAAH,4CAAAD,WAAA,IAAA,1EACgBK;AADhB,AAAA,0FAAA,mDAAA,2CAAA,6OAAA,0OAAA,mFAAA,mDAAA,2CAAA,wDAAA,sCAAA,6DAAA,3uBAKgB,IAAA,0GAAA,VAAyDD,0DAAaC,0GAElFI,6CAAgB,AAAA,yFAAUV;AAP9B,AAUqB,8BAAA,mFAAA,kEAAA,5KAACW,mPAA0CX;WAVhE,mFAAA,mDAAA,2CAAA,wDAAA,uDAAA,mFAAA,qDAAA,2CAAA,wDAAA,+KAAA,mFAAA,mDAAA,2CAAA,wDAAA,qDAAA,mFAAA,mDAAA,2CAAA,wDAAA,yBAAA,mFAAA,8CAAA,2CAAA,mbAAA,mFAAA,mDAAA,2CAAA,wDAAA,h+CAaoE,AAAA,+FAAaA,6xBAIhE,IAAA,qFACK,6GAAA,qCAAA,hJAAI,oDAAA,pDAACY,6CAAET,sIACvB,AAAA,4FAAYH,8RAEZ,iBAAAa,qBAAA,kEAAAC;AAAA,AAAA,YAAAC,kBAAA,KAAA;AAAA,AAAA,IAAAD,eAAAA;;AAAA,AAAA,IAAAE,qBAAA,AAAAC,cAAAH;AAAA,AAAA,GAAAE;AAAA,AAAA,IAAAF,eAAAE;AAAA,AAAA,GAAA,AAAAE,6BAAAJ;AAAA,IAAAK,kBAo+E2C,AAAAkD,sBAAAvD;IAp+E3CM,qBAAA,AAAAC,gBAAAF;IAAAG,WAAA,AAAAC,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAI,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAJ;AAAA,UAAA,AAAAK,eAAAN,gBAAAK,rCAAMU;AAAN,AAAA,AAAA,AAAAR,uBAAAJ,SAAA,oBAAA,mFAAA,qDAAA,2CAAA,wDAAA,iDAAA,uDAAA,2CAAA,uKAAA,mOAAA,2CAAA,oDACSY,7ZAE2B,qFAAA,rCAAK,AAACC,+BAAaD,mEACnB,AAACC,+BAAaD,qBAC/C,gEAAA,9DAAI,iDAAA,jDAACtB,6CAAEsB,wBAAuB,AAACE,mCAAiBF;;AALnD,eAAA,CAAAV,WAAA;;;;AAAA;;;;;AAAA,OAAAG,qBAAA,AAAAC,gBAAAN,UAAA,AAAAO,wDAAA,AAAAC,qBAAAhB;;AAAA,OAAAa,qBAAA,AAAAC,gBAAAN,UAAA;;;AAAA,UAAA,AAAAS,gBAAAjB,tBAAMoB;AAAN,AAAA,OAAAF,eAAA,oBAAA,mFAAA,qDAAA,2CAAA,wDAAA,iDAAA,uDAAA,2CAAA,uKAAA,mOAAA,2CAAA,iEAAA,AAAAH,wDAAA,AAAAI,eAAAnB,pFACSoB,7ZAE2B,qFAAA,rCAAK,AAACC,+BAAaD,mEACnB,AAACC,+BAAaD,qBAC/C,gEAAA,9DAAI,iDAAA,jDAACtB,6CAAEsB,wBAAuB,AAACE,mCAAiBF;;;AALnD;;;;GAAA,KAAA;;AAAA,AAAA,OAAArB,mBAAU,AAAA,6FAAYb;KArB5B,mFAAA,qDAAA,2CAAA,wDAAA,qpBAAA,mFAAA,mDAAA,2CAAA,wDAAA,gDAAA,mFAAA,qDAAA,2CAAA,4aAAA,mFAAA,yDAAA,2CAAA,pqDA4BO,4KAAA,OAAA,jLAAI,8JAAA,9JAACY,6CAAE,AAAA,wGAAkBZ,2CAC1B,oHAAA,AAAA,mFAAA,qDAAA,2CAAA,wDAAA,2CAAA,mBAAA,3ZAAM,oDAAA,pDAACY,6CAAET,w4BAIK,IAAA,qEACK,oHAAA,eAAA,jIAAI,oDAAA,pDAACS,6CAAET,+GAC1B,AAACkC,sCAAoB,AAAA,qFAAQrC,iQACV,IAAA,gIACK,iBAAAsC,WAAMnC;IAANmC,eAAA,EAAA,CAAAA,oBAAA9B,oBAAA,AAAA8B,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAA;;;KAAA;AAAA;;;;AAAA;;;OArC9B,6DAyCyB,WAAKC;AAAL,AACE,AAAkBA;;AAClB,oBAAI,AAAA,iFAAOvC;AACT,8BAAA,mFAAA,1GAACW,iLAA6B,AAAA,gFAAKX;;AACnC,8BAAA,mFAAA,1GAACW,4KAA0B,AAAA,gFAAKX;;WACvD,6GAAA,AAAA,mFAAA,qDAAA,2CAAA,wDAAA,uCAAA,iBAAA,9YAAM,oDAAA,pDAACY,6CAAET;;AAGjB,wCAAA,xCAAMqC;AAAN,AACE,IAAMC,SAAO,gDAAA,hDAACC;AAAd,AACE;AAAA,AACE,mBAAA,AAAAC,fAAMC,+BAAoB,sDAAA,mFAAA,zIAACC;gBAA3B,AAAAF,ZACMG,4BAAoB,sDAAA,mFAAA,zIAACD;IACrBE,qBAAmB,iBAAAC,WAAA,AAAAL,gBAAOF;IAAPO,eAAA,EAAA,CAAAA,oBAAAxC,oBAAA,AAAAwC,aAAA;AAAA,AAAA,QAAAA;KAAA;AACaJ;;;KADb;AAEa,sDAAA,WAAAK,1DAACC;AAAD,AAAS,OAACC,cAAI,AAAA,iFAAAF;GAAWL;;;KAFtC;AAGa,sDAAA,/CAACM,kGAAaN;;;;AAH3B,MAAA,KAAAnC,MAAA,IAAA,mEAAAuC;;;;AAFzB,AAAA,0FAAA,mDAAA,2CAAA,wDAAA,8BAAA,sIAAA,mFAAA,mDAAA,2CAAA,wDAAA,cAAA,mFAAA,mDAAA,2CAAA,wDAAA,nhBAOII,ymBAGC,iBAAAvC,qBAAA,8DAAAwC;AAAA,AAAA,YAAAtC,kBAAA,KAAA;AAAA,AAAA,IAAAsC,eAAAA;;AAAA,AAAA,IAAArC,qBAAA,AAAAC,cAAAoC;AAAA,AAAA,GAAArC;AAAA,AAAA,IAAAqC,eAAArC;AAAA,AAAA,GAAA,AAAAE,6BAAAmC;AAAA,IAAAlC,kBA27EwC,AAAAkD,sBAAAhB;IA37ExCjC,qBAAA,AAAAC,gBAAAF;IAAAmC,WAAA,AAAA/B,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAmC,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAnC;AAAA,IAAAoC,aAAA,AAAA/B,eAAAN,gBAAAoC;QAAA,AAAArD,4CAAAsD,WAAA,IAAA,/DAAOG;YAAP,AAAAzD,4CAAAsD,WAAA,IAAA,nEAASI;AAAT,AAAA,AAAA,AAAAlC,uBAAA4B,SAAA,oBAAA,mFAAA,yDAAA,2CAAA,iSAAA,6DAAA,tSAEsB,IAAA,8GACK,2EAAA,yBAAA,lGAAI,6CAAA,AAAAX,7CAAC/B,6DAAG6B,QAAOkB;;AAH1C,AAMuB,OAACE,sBAAOpB,OAAOkB;;uBANtC,2CAAA,oDACSA,7GAMNC;;AAPH,eAAA,CAAAL,WAAA;;;;AAAA;;;;;AAAA,OAAA5B,qBAAA,AAAAC,gBAAA0B,UAAA,AAAAG,oDAAA,AAAA3B,qBAAAuB;;AAAA,OAAA1B,qBAAA,AAAAC,gBAAA0B,UAAA;;;AAAA,IAAAI,aAAA,AAAA3B,gBAAAsB;QAAA,AAAAnD,4CAAAwD,WAAA,IAAA,/DAAOC;YAAP,AAAAzD,4CAAAwD,WAAA,IAAA,nEAASE;AAAT,AAAA,OAAA5B,eAAA,oBAAA,mFAAA,yDAAA,2CAAA,iSAAA,6DAAA,tSAEsB,IAAA,8GACK,2EAAA,yBAAA,lGAAI,6CAAA,AAAAW,7CAAC/B,6DAAG6B,QAAOkB;;AAH1C,AAMuB,OAACE,sBAAOpB,OAAOkB;;uBANtC,2CAAA,+DAAA,AAAAF,oDAAA,AAAAxB,eAAAoB,9EACSM,7GAMNC;;;AAPH;;;;GAAA,KAAA;;AAAA,AAAA,OAAA/C,mBAAA,mFAAA,mFAAA,wDAAA,gBAAA,mFAAA,+DAAA,oBAAA,mFAAA,uDAAA;aAQD,8CAAA,mFAAA,mDAAA,2CAAA,wDAAA,wEAAA,mFAAA,qDAAA,2CAAA,wDAAA,wBAAA,uBAAA,mFAAA,8CAAA,2CAAA,wDAAA,sBAAA,0BAAA,mFAAA,8CAAA,2CAAA,wDAAA,uBAAA,toCAAI,AAACiD,uBAAOf,mpCAKT,4BAAA,AAAA,mFAAA,yDAAA,2CAAA,wDAAA,oEAAA,6DAAA,1YAAM,AAAC9B,cAAI6B;AAAX,AAEuB,8BAAA,mFAAA,1GAACnC;mEAP3B,mFAAA,3IAKG,0CAAA,oJAKA,iBAAAE,qBAAA,8DAAAkD;AAAA,AAAA,YAAAhD,kBAAA,KAAA;AAAA,AAAA,IAAAgD,eAAAA;;AAAA,AAAA,IAAA/C,qBAAA,AAAAC,cAAA8C;AAAA,AAAA,GAAA/C;AAAA,AAAA,IAAA+C,eAAA/C;AAAA,AAAA,GAAA,AAAAE,6BAAA6C;AAAA,IAAA5C,kBAy6EsC,AAAAkD,sBAAAN;IAz6EtC3C,qBAAA,AAAAC,gBAAAF;IAAA6C,WAAA,AAAAzC,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAA6C,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAA7C;AAAA,QAAA,AAAAK,eAAAN,gBAAA8C,nCAAME;AAAN,AAAA,AAAA,AAAAzC,uBAAAsC,SAAA,oBAAA,uIAAA,2CAAA,oDACS,AAAA,gFAAKG,nOACXpE,0CAAaoE;;AAFhB,eAAA,CAAAF,WAAA;;;;AAAA;;;;;AAAA,OAAAtC,qBAAA,AAAAC,gBAAAoC,UAAA,AAAAE,oDAAA,AAAApC,qBAAAiC;;AAAA,OAAApC,qBAAA,AAAAC,gBAAAoC,UAAA;;;AAAA,QAAA,AAAAjC,gBAAAgC,pBAAMI;AAAN,AAAA,OAAAnC,eAAA,oBAAA,uIAAA,2CAAA,gJAAA,AAAAkC,oDAAA,AAAAjC,eAAA8B,/JACS,AAAA,gFAAKI,nOACXpE,0CAAaoE;;;AAFhB;;;;GAAA,KAAA;;AAAA,AAAA,OAAAtD,mBAAQ,gDAAA,hDAACuD,iHAAoBrB;KAG7B,4BAAA,AAAA,mFAAA,yDAAA,2CAAA,wDAAA,oGAAA,6DAAA,1aAAM,AAAC9B,cAAI6B;AAAX,AAEuB,8BAAA,mFAAA,1GAACnC;WAFxB,sDAAA","names":["casa-financas.views.despesas/item-despesa","despesa","vec__17171","cljs.core.nth","status","casa-financas.utils/despesa-status","bg-class","border-class","G__17183","cljs.core/Keyword","js/Error","casa-financas.components.comum/barra-divisao","re-frame.core/dispatch","cljs.core._EQ_","iter__5628__auto__","s__17201","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5626__auto__","size__5627__auto__","cljs.core/count","b__17203","cljs.core/chunk-buffer","i__17202","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__17200","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","pid","casa-financas.utils/pessoa-cor","casa-financas.utils/pessoa-inicial","casa-financas.utils/formatar-valor-br","G__17250","e","casa-financas.views.despesas/despesas","filtro","reagent.core.atom","cljs.core/deref","despesas-mes","re_frame.core.subscribe","templates","despesas-filtradas","G__17256","p1__17251#","cljs.core.filter","cljs.core/not","casa-financas.components.comum/seletor-mes","s__17263","b__17265","i__17264","vec__17272","iter__17262","vec__17279","k","label","cljs.core/reset!","cljs.core/empty?","s__17293","b__17295","i__17294","iter__17292","d","cljs.core.sort_by","cljs.core/chunk-first"],"sourcesContent":["(ns casa-financas.views.despesas\r\n  (:require [re-frame.core :as rf]\r\n            [reagent.core :as r]\r\n            [casa-financas.utils :as u]\r\n            [casa-financas.components.comum :as c]))\r\n\r\n(defn item-despesa [despesa]\r\n  (let [status (u/despesa-status despesa)\r\n        [bg-class border-class] (case status\r\n                                  :paga     [\"bg-green-30\" \"border-green-100\"]\r\n                                  :vencida  [\"bg-red-50\"   \"border-red-200\"]\r\n                                  :pendente [\"bg-white\"    \"border-gray-100\"])]\r\n    [:div {:class (str \"rounded-xl border overflow-hidden mb-2 shadow-sm \" bg-class \" \" border-class)}\r\n     ;; Barra divis\u00e3o no topo\r\n     [c/barra-divisao (:divisao despesa)]\r\n     ;; Conte\u00fado\r\n     [:div {:class    \"flex items-center gap-2 px-3 py-2.5\"\r\n            :on-click #(rf/dispatch [:abrir-modal :editar-despesa despesa])}\r\n      ;; Dia\r\n      [:div {:class \"flex flex-col items-center w-6 flex-shrink-0\"}\r\n       [:span {:class \"text-xs font-bold text-gray-700 leading-none\"} (:dia_do_mes despesa)]]\r\n      [:div {:class \"w-px h-8 bg-gray-200 flex-shrink-0\"}]\r\n      ;; Info principal\r\n      [:div {:class \"flex-1 min-w-0\"}\r\n       [:p {:class (str \"font-semibold text-sm truncate mb-0.5 \"\r\n                        (if (= status :paga) \"line-through text-gray-400 text-lg\" \"text-gray-800 text-lg\"))}\r\n        (:descricao despesa)]\r\n       [:div {:class \"flex items-center gap-1.5\"}\r\n        (for [pid (:pagadores despesa)]\r\n          ^{:key pid}\r\n          [:span {:class \"text-xs px-1.5 py-0.5 rounded-full font-medium\"\r\n                  :style {:background-color (str (u/pessoa-cor pid) \"20\")\r\n                          :color            (u/pessoa-cor pid)}}\r\n           (if (= pid \"conjunta\") \"Casa\" (u/pessoa-inicial pid))])\r\n        [:span {:class \"text-xs text-gray-400\"}\r\n         (if (= (:forma_pagamento despesa) \"credito\") \"cred\" \"pix\")]\r\n        (when (= status :vencida)\r\n          [:span {:class \"text-xs text-red-500 font-medium\"} \"atrasada\"])]]\r\n      ;; Valor + checkbox\r\n      [:div {:class \"flex items-center gap-2 flex-shrink-0\"}\r\n       [:span {:class (str \"font-semibold text-sm \"\r\n                           (if (= status :vencida) \"text-red-600\" \"text-gray-800\"))}\r\n        (u/formatar-valor-br (:valor despesa))]\r\n       [:button {:class    (str \"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors \"\r\n                                (case status\r\n                                  :paga    \"bg-green-400 border-green-400\"\r\n                                  :vencida \"border-red-300\"\r\n                                  \"border-gray-300\"))\r\n                 :on-click (fn [e]\r\n                             (.stopPropagation e)\r\n                             (if (:pago despesa)\r\n                               (rf/dispatch [:desmarcar-pago (:id despesa)])\r\n                               (rf/dispatch [:marcar-pago (:id despesa)])))}\r\n        (when (= status :paga)\r\n          [:span {:class \"text-white text-xs font-bold\"} \"\u2713\"])]]]]))\r\n\r\n(defn despesas []\r\n  (let [filtro (r/atom :todas)]\r\n    (fn []\r\n      (let [despesas-mes       @(rf/subscribe [:despesas-do-mes])\r\n            templates          @(rf/subscribe [:templates])\r\n            despesas-filtradas (case @filtro\r\n                                 :todas     despesas-mes\r\n                                 :pendentes (filter #(not (:pago %)) despesas-mes)\r\n                                 :pagas     (filter :pago despesas-mes))]\r\n        [:div {:class \"flex flex-col pb-24\"}\r\n         [c/seletor-mes]\r\n         [:div {:class \"p-3\"}\r\n          [:div {:class \"flex gap-1 p-1.5 bg-white rounded-2xl border border-gray-100 shadow-sm mb-3\"}\r\n           (for [[k label] [[:todas \"Todas\"] [:pendentes \"Pendentes\"] [:pagas \"Pagas\"]]]\r\n             ^{:key k}\r\n             [:button {:class    (str \"flex-1 py-1.5 rounded-xl text-sm font-medium transition-colors \"\r\n                                      (if (= @filtro k)\r\n                                        \"bg-blue-500 text-white\"\r\n                                        \"text-gray-500\"))\r\n                       :on-click #(reset! filtro k)}\r\n              label])]\r\n          (if (empty? despesas-filtradas)\r\n            [:div {:class \"flex flex-col items-center justify-center py-12 text-gray-400\"}\r\n             [:span {:class \"text-4xl mb-3\"} \"\ud83d\udcb8\"]\r\n             [:p {:class \"font-medium\"} \"Nenhuma despesa\"]\r\n             [:p {:class \"text-sm mb-4\"} \"Toque no + para adicionar\"]\r\n             (when (seq templates)\r\n               [:button {:class    \"px-4 py-2 bg-blue-50 text-blue-600 rounded-xl text-sm font-medium\"\r\n                         :on-click #(rf/dispatch [:importar-templates])}\r\n                \"\ud83d\udccb Importar Templates\"])]\r\n            [:div\r\n             (for [d (sort-by :dia_do_mes despesas-filtradas)]\r\n               ^{:key (:id d)}\r\n               [item-despesa d])\r\n             (when (seq templates)\r\n               [:button {:class    \"w-full mt-2 py-2.5 rounded-xl text-sm font-medium text-blue-600 bg-blue-50 border border-blue-100\"\r\n                         :on-click #(rf/dispatch [:importar-templates])}\r\n                \"\ud83d\udccb Importar Templates do M\u00eas\"])])]]))))"]}