shadow$provide.module$node_modules$$supabase$realtime_js$dist$main$lib$websocket_factory = function(require, module, exports, global) {
  Object.defineProperty(exports, "__esModule", {value:!0});
  exports.WebSocketFactory = void 0;
  class WebSocketFactory {
    constructor() {
    }
    static detectEnvironment() {
      var _a;
      return typeof WebSocket !== "undefined" ? {type:"native", constructor:WebSocket} : typeof globalThis !== "undefined" && typeof globalThis.WebSocket !== "undefined" ? {type:"native", constructor:globalThis.WebSocket} : typeof global !== "undefined" && typeof global.WebSocket !== "undefined" ? {type:"native", constructor:global.WebSocket} : typeof globalThis !== "undefined" && typeof globalThis.WebSocketPair !== "undefined" && typeof globalThis.WebSocket === "undefined" ? {type:"cloudflare", 
      error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.", workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."} : typeof globalThis !== "undefined" && globalThis.EdgeRuntime || typeof navigator !== "undefined" && ((_a = navigator.userAgent) === null || _a === void 0 ? 0 : _a.includes("Vercel-Edge")) ? {type:"unsupported", error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.", 
      workaround:"Use serverless functions or a different deployment target for WebSocket functionality."} : (_a = globalThis.process) && (_a = _a.versions) && _a.node ? (_a = parseInt(_a.node.replace(/^v/, "").split(".")[0]), _a >= 22 ? typeof globalThis.WebSocket !== "undefined" ? {type:"native", constructor:globalThis.WebSocket} : {type:"unsupported", error:`Node.js ${_a} detected but native WebSocket not found.`, workaround:"Provide a WebSocket implementation via the transport option."} : {type:"unsupported", 
      error:`Node.js ${_a} detected without native WebSocket support.`, workaround:'For Node.js \x3c 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}) : {type:"unsupported", error:"Unknown JavaScript runtime without WebSocket support.", workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."};
    }
    static getWebSocketConstructor() {
      const env = this.detectEnvironment();
      if (env.constructor) {
        return env.constructor;
      }
      let errorMessage = env.error || "WebSocket not supported in this environment.";
      env.workaround && (errorMessage += `\n\nSuggested solution: ${env.workaround}`);
      throw Error(errorMessage);
    }
    static createWebSocket(url, protocols) {
      return new (this.getWebSocketConstructor())(url, protocols);
    }
    static isWebSocketSupported() {
      try {
        const env = this.detectEnvironment();
        return env.type === "native" || env.type === "ws";
      } catch (_a) {
        return !1;
      }
    }
  }
  exports.WebSocketFactory = WebSocketFactory;
  exports.default = WebSocketFactory;
};

//# sourceMappingURL=module$node_modules$$supabase$realtime_js$dist$main$lib$websocket_factory.js.map
