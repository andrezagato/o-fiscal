["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/@supabase/realtime-js/dist/main/lib/push.js"],"~:js","shadow$provide[26]=function(S,ka,a){Object.defineProperty(a,\"__esModule\",{value:!0});const I=S(22);class q{constructor(D,C,G={},E=I.DEFAULT_TIMEOUT){this.channel=D;this.event=C;this.payload=G;this.timeout=E;this.sent=!1;this.timeoutTimer=void 0;this.ref=\"\";this.receivedResp=null;this.recHooks=[];this.refEvent=null}resend(D){this.timeout=D;this._cancelRefEvent();this.ref=\"\";this.receivedResp=this.refEvent=null;this.sent=!1;this.send()}send(){this._hasReceived(\"timeout\")||(this.startTimeout(),this.sent=\n!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(D){this.payload=Object.assign(Object.assign({},this.payload),D)}receive(D,C){var G;this._hasReceived(D)&&C((G=this.receivedResp)===null||G===void 0?void 0:G.response);this.recHooks.push({status:D,callback:C});return this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),\nthis.channel._on(this.refEvent,{},D=>{this._cancelRefEvent();this._cancelTimeout();this.receivedResp=D;this._matchReceive(D)}),this.timeoutTimer=setTimeout(()=>{this.trigger(\"timeout\",{})},this.timeout))}trigger(D,C){this.refEvent&&this.channel._trigger(this.refEvent,{status:D,response:C})}destroy(){this._cancelRefEvent();this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer);this.timeoutTimer=void 0}_matchReceive({status:D,\nresponse:C}){this.recHooks.filter(G=>G.status===D).forEach(G=>G.callback(C))}_hasReceived(D){return this.receivedResp&&this.receivedResp.status===D}}a.default=q}","~:source","shadow$provide[26] = function(require,module,exports) {\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst constants_1 = require(\"../lib/constants\");\r\nclass Push {\r\n    /**\r\n     * Initializes the Push\r\n     *\r\n     * @param channel The Channel\r\n     * @param event The event, for example `\"phx_join\"`\r\n     * @param payload The payload, for example `{user_id: 123}`\r\n     * @param timeout The push timeout in milliseconds\r\n     */\r\n    constructor(channel, event, payload = {}, timeout = constants_1.DEFAULT_TIMEOUT) {\r\n        this.channel = channel;\r\n        this.event = event;\r\n        this.payload = payload;\r\n        this.timeout = timeout;\r\n        this.sent = false;\r\n        this.timeoutTimer = undefined;\r\n        this.ref = '';\r\n        this.receivedResp = null;\r\n        this.recHooks = [];\r\n        this.refEvent = null;\r\n    }\r\n    resend(timeout) {\r\n        this.timeout = timeout;\r\n        this._cancelRefEvent();\r\n        this.ref = '';\r\n        this.refEvent = null;\r\n        this.receivedResp = null;\r\n        this.sent = false;\r\n        this.send();\r\n    }\r\n    send() {\r\n        if (this._hasReceived('timeout')) {\r\n            return;\r\n        }\r\n        this.startTimeout();\r\n        this.sent = true;\r\n        this.channel.socket.push({\r\n            topic: this.channel.topic,\r\n            event: this.event,\r\n            payload: this.payload,\r\n            ref: this.ref,\r\n            join_ref: this.channel._joinRef(),\r\n        });\r\n    }\r\n    updatePayload(payload) {\r\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\r\n    }\r\n    receive(status, callback) {\r\n        var _a;\r\n        if (this._hasReceived(status)) {\r\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\r\n        }\r\n        this.recHooks.push({ status, callback });\r\n        return this;\r\n    }\r\n    startTimeout() {\r\n        if (this.timeoutTimer) {\r\n            return;\r\n        }\r\n        this.ref = this.channel.socket._makeRef();\r\n        this.refEvent = this.channel._replyEventName(this.ref);\r\n        const callback = (payload) => {\r\n            this._cancelRefEvent();\r\n            this._cancelTimeout();\r\n            this.receivedResp = payload;\r\n            this._matchReceive(payload);\r\n        };\r\n        this.channel._on(this.refEvent, {}, callback);\r\n        this.timeoutTimer = setTimeout(() => {\r\n            this.trigger('timeout', {});\r\n        }, this.timeout);\r\n    }\r\n    trigger(status, response) {\r\n        if (this.refEvent)\r\n            this.channel._trigger(this.refEvent, { status, response });\r\n    }\r\n    destroy() {\r\n        this._cancelRefEvent();\r\n        this._cancelTimeout();\r\n    }\r\n    _cancelRefEvent() {\r\n        if (!this.refEvent) {\r\n            return;\r\n        }\r\n        this.channel._off(this.refEvent, {});\r\n    }\r\n    _cancelTimeout() {\r\n        clearTimeout(this.timeoutTimer);\r\n        this.timeoutTimer = undefined;\r\n    }\r\n    _matchReceive({ status, response }) {\r\n        this.recHooks.filter((h) => h.status === status).forEach((h) => h.callback(response));\r\n    }\r\n    _hasReceived(status) {\r\n        return this.receivedResp && this.receivedResp.status === status;\r\n    }\r\n}\r\nexports.default = Push;\r\n//# sourceMappingURL=push.js.map\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$shadow.js","~$module$node_modules$$supabase$realtime_js$dist$main$lib$constants"]],"~:properties",["^5",["callback","sent","join_ref","__esModule","refEvent","event","recHooks","receivedResp","value","status","timeout","timeoutTimer","ref","channel","response","payload","default","topic"]],"~:compiled-at",1771869280847,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$$supabase$realtime_js$dist$main$lib$push.js\",\n\"lineCount\":4,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/@supabase/realtime-js/dist/main/lib/push.js\"],\n\"sourcesContent\":[\"shadow$provide[26] = function(require,module,exports) {\\n\\\"use strict\\\";\\r\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\r\\nconst constants_1 = require(\\\"../lib/constants\\\");\\r\\nclass Push {\\r\\n    /**\\r\\n     * Initializes the Push\\r\\n     *\\r\\n     * @param channel The Channel\\r\\n     * @param event The event, for example `\\\"phx_join\\\"`\\r\\n     * @param payload The payload, for example `{user_id: 123}`\\r\\n     * @param timeout The push timeout in milliseconds\\r\\n     */\\r\\n    constructor(channel, event, payload = {}, timeout = constants_1.DEFAULT_TIMEOUT) {\\r\\n        this.channel = channel;\\r\\n        this.event = event;\\r\\n        this.payload = payload;\\r\\n        this.timeout = timeout;\\r\\n        this.sent = false;\\r\\n        this.timeoutTimer = undefined;\\r\\n        this.ref = '';\\r\\n        this.receivedResp = null;\\r\\n        this.recHooks = [];\\r\\n        this.refEvent = null;\\r\\n    }\\r\\n    resend(timeout) {\\r\\n        this.timeout = timeout;\\r\\n        this._cancelRefEvent();\\r\\n        this.ref = '';\\r\\n        this.refEvent = null;\\r\\n        this.receivedResp = null;\\r\\n        this.sent = false;\\r\\n        this.send();\\r\\n    }\\r\\n    send() {\\r\\n        if (this._hasReceived('timeout')) {\\r\\n            return;\\r\\n        }\\r\\n        this.startTimeout();\\r\\n        this.sent = true;\\r\\n        this.channel.socket.push({\\r\\n            topic: this.channel.topic,\\r\\n            event: this.event,\\r\\n            payload: this.payload,\\r\\n            ref: this.ref,\\r\\n            join_ref: this.channel._joinRef(),\\r\\n        });\\r\\n    }\\r\\n    updatePayload(payload) {\\r\\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\\r\\n    }\\r\\n    receive(status, callback) {\\r\\n        var _a;\\r\\n        if (this._hasReceived(status)) {\\r\\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\\r\\n        }\\r\\n        this.recHooks.push({ status, callback });\\r\\n        return this;\\r\\n    }\\r\\n    startTimeout() {\\r\\n        if (this.timeoutTimer) {\\r\\n            return;\\r\\n        }\\r\\n        this.ref = this.channel.socket._makeRef();\\r\\n        this.refEvent = this.channel._replyEventName(this.ref);\\r\\n        const callback = (payload) => {\\r\\n            this._cancelRefEvent();\\r\\n            this._cancelTimeout();\\r\\n            this.receivedResp = payload;\\r\\n            this._matchReceive(payload);\\r\\n        };\\r\\n        this.channel._on(this.refEvent, {}, callback);\\r\\n        this.timeoutTimer = setTimeout(() => {\\r\\n            this.trigger('timeout', {});\\r\\n        }, this.timeout);\\r\\n    }\\r\\n    trigger(status, response) {\\r\\n        if (this.refEvent)\\r\\n            this.channel._trigger(this.refEvent, { status, response });\\r\\n    }\\r\\n    destroy() {\\r\\n        this._cancelRefEvent();\\r\\n        this._cancelTimeout();\\r\\n    }\\r\\n    _cancelRefEvent() {\\r\\n        if (!this.refEvent) {\\r\\n            return;\\r\\n        }\\r\\n        this.channel._off(this.refEvent, {});\\r\\n    }\\r\\n    _cancelTimeout() {\\r\\n        clearTimeout(this.timeoutTimer);\\r\\n        this.timeoutTimer = undefined;\\r\\n    }\\r\\n    _matchReceive({ status, response }) {\\r\\n        this.recHooks.filter((h) => h.status === status).forEach((h) => h.callback(response));\\r\\n    }\\r\\n    _hasReceived(status) {\\r\\n        return this.receivedResp && this.receivedResp.status === status;\\r\\n    }\\r\\n}\\r\\nexports.default = Push;\\r\\n//# sourceMappingURL=push.js.map\\n};\"],\n\"names\":[\"shadow$provide\",\"require\",\"module\",\"exports\",\"Object\",\"defineProperty\",\"value\",\"constants_1\",\"Push\",\"constructor\",\"channel\",\"event\",\"payload\",\"timeout\",\"DEFAULT_TIMEOUT\",\"sent\",\"timeoutTimer\",\"undefined\",\"ref\",\"receivedResp\",\"recHooks\",\"refEvent\",\"resend\",\"_cancelRefEvent\",\"send\",\"_hasReceived\",\"startTimeout\",\"socket\",\"push\",\"topic\",\"join_ref\",\"_joinRef\",\"updatePayload\",\"assign\",\"receive\",\"status\",\"callback\",\"_a\",\"response\",\"_makeRef\",\"_replyEventName\",\"_on\",\"_cancelTimeout\",\"_matchReceive\",\"setTimeout\",\"trigger\",\"_trigger\",\"destroy\",\"_off\",\"clearTimeout\",\"filter\",\"h\",\"forEach\",\"default\"]\n}\n"]